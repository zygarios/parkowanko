import{A as re,B as ce,a as St,b as qt,c as Gt,d as nt,h as Yt,j as Jt,l as ht,n as te,r as ee,s as ie,u as ae,w as ne,x as oe,y as se}from"./chunk-6S2F474M.js";import{h as Qt}from"./chunk-XPSQGQQP.js";import{a as _t,b as ut}from"./chunk-VIWDTXIJ.js";import{A as B,Aa as l,Ab as mt,Ca as yt,D as st,Da as jt,Fb as P,G as S,Gb as k,Gc as dt,Hc as Wt,Ib as h,Jb as N,Kb as A,Kc as Zt,Mc as Xt,O as rt,Oa as u,Pa as E,Q as X,Qa as tt,S as xt,Tc as G,Ua as et,Uc as Kt,V as w,Va as it,Vb as Ct,Vc as D,W as I,Wb as T,Wc as R,Y as Q,_ as s,ca as K,cb as q,cc as Ut,d as Tt,da as Y,db as f,e as g,eb as v,ed as pt,fa as M,fd as le,g as Rt,ga as ct,gb as Pt,gd as $,ha as J,hb as Nt,ib as Vt,j as Lt,ja as Ot,jb as F,jd as V,k as L,ka as Bt,kb as c,lb as m,mb as j,oa as z,oc as Ht,pa as zt,qb as at,sb as x,ta as Ft,ub as d,w as ot,xc as $t,y as O,ya as kt,yb as wt,zb as lt}from"./chunk-GE2LIWLD.js";import{a as b,b as vt}from"./chunk-VZBGOO6O.js";function me(i){i||(i=s(J));let n=new Tt(t=>{if(i.destroyed){t.next();return}return i.onDestroy(t.next.bind(t))});return t=>t.pipe(rt(n))}function mi(i,n){let t=n?.injector??s(M),e=new Rt(1),a=zt(()=>{let o;try{o=i()}catch(r){Ct(()=>e.error(r));return}Ct(()=>e.next(o))},{injector:t,manualCleanup:!0});return t.get(J).onDestroy(()=>{a.destroy(),e.complete()}),e.asObservable()}function di(i,n){let e=!n?.manualCleanup?n?.injector?.get(J)??s(J):null,a=Me(n?.equal),o;n?.requireSync?o=z({kind:0},{equal:a}):o=z({kind:1,value:n?.initialValue},{equal:a});let r,p=i.subscribe({next:_=>o.set({kind:1,value:_}),error:_=>{o.set({kind:2,error:_}),r?.()},complete:()=>{r?.()}});if(n?.requireSync&&o().kind===0)throw new xt(601,!1);return r=e?.onDestroy(p.unsubscribe.bind(p)),T(()=>{let _=o();switch(_.kind){case 1:return _.value;case 2:throw _.error;case 0:throw new xt(601,!1)}},{equal:n?.equal})}function Me(i=Object.is){return(n,t)=>n.kind===1&&t.kind===1&&i(n.value,t.value)}function Ie(i,n){}var de="_mat-bottom-sheet-enter",he="_mat-bottom-sheet-exit",Ee=(()=>{class i extends ee{_breakpointSubscription;_animationsDisabled=R();_animationState="void";_animationStateChanged=new Ot;_destroyed=!1;constructor(){super();let t=s(dt);this._breakpointSubscription=t.observe([D.Medium,D.Large,D.XLarge]).subscribe(()=>{let e=this._elementRef.nativeElement.classList;e.toggle("mat-bottom-sheet-container-medium",t.isMatched(D.Medium)),e.toggle("mat-bottom-sheet-container-large",t.isMatched(D.Large)),e.toggle("mat-bottom-sheet-container-xlarge",t.isMatched(D.XLarge))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._animationsDisabled&&this._simulateAnimation(de))}exit(){this._destroyed||(this._elementRef.nativeElement.setAttribute("mat-exit",""),this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._animationsDisabled&&this._simulateAnimation(he))}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_simulateAnimation(t){this._ngZone.run(()=>{this._handleAnimationEvent(!0,t),setTimeout(()=>this._handleAnimationEvent(!1,t))})}_trapFocus(){super._trapFocus({preventScroll:!0})}_handleAnimationEvent(t,e){let a=e===de;(a||e===he)&&this._animationStateChanged.emit({toState:a?"visible":"hidden",phase:t?"start":"done"})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:9,hostBindings:function(e,a){e&1&&x("animationstart",function(r){return a._handleAnimationEvent(!0,r.animationName)})("animationend",function(r){return a._handleAnimationEvent(!1,r.animationName)})("animationcancel",function(r){return a._handleAnimationEvent(!1,r.animationName)}),e&2&&(q("role",a._config.role)("aria-modal",a._config.ariaModal)("aria-label",a._config.ariaLabel),k("mat-bottom-sheet-container-animations-enabled",!a._animationsDisabled)("mat-bottom-sheet-container-enter",a._animationState==="visible")("mat-bottom-sheet-container-exit",a._animationState==="hidden"))},features:[et],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,a){e&1&&it(0,Ie,0,0,"ng-template",0)},dependencies:[nt],styles:[`@keyframes _mat-bottom-sheet-enter{from{transform:translateY(100%)}to{transform:none}}@keyframes _mat-bottom-sheet-exit{from{transform:none}to{transform:translateY(100%)}}.mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;position:relative;background:var(--mat-bottom-sheet-container-background-color, var(--mat-sys-surface-container-low));color:var(--mat-bottom-sheet-container-text-color, var(--mat-sys-on-surface));font-family:var(--mat-bottom-sheet-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-bottom-sheet-container-text-size, var(--mat-sys-body-large-size));line-height:var(--mat-bottom-sheet-container-text-line-height, var(--mat-sys-body-large-line-height));font-weight:var(--mat-bottom-sheet-container-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-bottom-sheet-container-text-tracking, var(--mat-sys-body-large-tracking))}@media(forced-colors: active){.mat-bottom-sheet-container{outline:1px solid}}.mat-bottom-sheet-container-animations-enabled{transform:translateY(100%)}.mat-bottom-sheet-container-animations-enabled.mat-bottom-sheet-container-enter{animation:_mat-bottom-sheet-enter 195ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-bottom-sheet-container-animations-enabled.mat-bottom-sheet-container-exit{animation:_mat-bottom-sheet-exit 375ms cubic-bezier(0.4, 0, 1, 1) backwards}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape, 28px);border-top-right-radius:var(--mat-bottom-sheet-container-shape, 28px)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}
`],encapsulation:2})}return i})(),At=new Q("MatBottomSheetData"),Mt=class{viewContainerRef;injector;panelClass;direction;data=null;hasBackdrop=!0;backdropClass;disableClose=!1;ariaLabel=null;ariaModal=!1;closeOnNavigation=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;height="";minHeight;maxHeight},W=class{_ref;get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}containerInstance;disableClose;_afterOpened=new g;_result;_closeFallbackTimeout;constructor(n,t,e){this._ref=n,this.containerInstance=e,this.disableClose=t.disableClose,e._animationStateChanged.pipe(O(a=>a.phase==="done"&&a.toState==="visible"),st(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(O(a=>a.phase==="done"&&a.toState==="hidden"),st(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),n.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),ot(this.backdropClick(),this.keydownEvents().pipe(O(a=>a.keyCode===27))).subscribe(a=>{!this.disableClose&&(a.type!=="keydown"||!Xt(a))&&(a.preventDefault(),this.dismiss())})}dismiss(n){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe(O(t=>t.phase==="start"),st(1)).subscribe(()=>{this._closeFallbackTimeout=setTimeout(()=>this._ref.close(this._result),500),this._ref.overlayRef.detachBackdrop()}),this._result=n,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}},Te=new Q("mat-bottom-sheet-default-options"),pe=(()=>{class i{_injector=s(M);_parentBottomSheet=s(i,{optional:!0,skipSelf:!0});_animationsDisabled=R();_defaultOptions=s(Te,{optional:!0});_bottomSheetRefAtThisLevel=null;_dialog=s(ie);get _openedBottomSheetRef(){let t=this._parentBottomSheet;return t?t._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(t){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=t:this._bottomSheetRefAtThisLevel=t}constructor(){}open(t,e){let a=b(b({},this._defaultOptions||new Mt),e),o;return this._dialog.open(t,vt(b({},a),{disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:Ee,scrollStrategy:a.scrollStrategy||Yt(this._injector),positionStrategy:ht(this._injector).centerHorizontally().bottom("0"),disableAnimations:this._animationsDisabled,templateContext:()=>({bottomSheetRef:o}),providers:(r,p,_)=>(o=new W(r,a,_),[{provide:W,useValue:o},{provide:At,useValue:a.data}])})),o.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===o&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>o.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):o.containerInstance.enter(),this._openedBottomSheetRef=o,o}dismiss(t){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(t)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Re(i,n){if(i&1){let t=at();c(0,"div",1)(1,"button",2),x("click",function(){K(t);let a=d();return Y(a.action())}),h(2),m()()}if(i&2){let t=d();l(2),A(" ",t.data.action," ")}}var Le=["label"];function Oe(i,n){}var Be=Math.pow(2,31)-1,U=class{_overlayRef;instance;containerInstance;_afterDismissed=new g;_afterOpened=new g;_onAction=new g;_durationTimeoutId;_dismissedByAction=!1;constructor(n,t){this._overlayRef=t,this.containerInstance=n,n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,Be))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},bt=new Q("MatSnackBarData"),Z=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},ze=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275dir=tt({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return i})(),Fe=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275dir=tt({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return i})(),je=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275dir=tt({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return i})(),Pe=(()=>{class i{snackBarRef=s(U);data=s(bt);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(e,a){e&1&&(c(0,"div",0),h(1),m(),f(2,Re,3,1,"div",1)),e&2&&(l(),A(" ",a.data.message,`
`),l(),v(a.hasAction?2:-1))},dependencies:[$,ze,Fe,je],styles:[`.mat-mdc-simple-snack-bar{display:flex}.mat-mdc-simple-snack-bar .mat-mdc-snack-bar-label{max-height:50vh;overflow:auto}
`],encapsulation:2,changeDetection:0})}return i})(),Dt="_mat-snack-bar-enter",It="_mat-snack-bar-exit",Ne=(()=>{class i extends Gt{_ngZone=s(Bt);_elementRef=s(Ft);_changeDetectorRef=s(Ut);_platform=s($t);_animationsDisabled=R();snackBarConfig=s(Z);_document=s(ct);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=s(M);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new g;_onExit=new g;_onEnter=new g;_animationState="void";_live;_label;_role;_liveElementId=s(Kt).getId("mat-snack-bar-container-live-");constructor(){super();let t=this.snackBarConfig;t.politeness==="assertive"&&!t.announcementMessage?this._live="assertive":t.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();let e=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),e}attachTemplatePortal(t){this._assertNotAttached();let e=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),e}attachDomPortal=t=>{this._assertNotAttached();let e=this._portalOutlet.attachDomPortal(t);return this._afterPortalAttached(),e};onAnimationEnd(t){t===It?this._completeExit():t===Dt&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?yt(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Dt)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Dt)},200)))}exit(){return this._destroyed?Lt(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?yt(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(It)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(It),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach(r=>t.classList.add(r)):t.classList.add(e)),this._exposeToModals();let a=this._label.nativeElement,o="mdc-snackbar__label";a.classList.toggle(o,!a.querySelector(`.${o}`))}_exposeToModals(){let t=this._liveElementId,e=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let a=0;a<e.length;a++){let o=e[a],r=o.getAttribute("aria-owns");this._trackedModals.add(o),r?r.indexOf(t)===-1&&o.setAttribute("aria-owns",r+" "+t):o.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{let e=t.getAttribute("aria-owns");if(e){let a=e.replace(this._liveElementId,"").trim();a.length>0?t.setAttribute("aria-owns",a):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let t=this._elementRef.nativeElement,e=t.querySelector("[aria-hidden]"),a=t.querySelector("[aria-live]");if(e&&a){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(o=document.activeElement),e.removeAttribute("aria-hidden"),a.appendChild(e),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,a){if(e&1&&wt(nt,7)(Le,7),e&2){let o;lt(o=mt())&&(a._portalOutlet=o.first),lt(o=mt())&&(a._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(e,a){e&1&&x("animationend",function(r){return a.onAnimationEnd(r.animationName)})("animationcancel",function(r){return a.onAnimationEnd(r.animationName)}),e&2&&k("mat-snack-bar-container-enter",a._animationState==="visible")("mat-snack-bar-container-exit",a._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!a._animationsDisabled)},features:[et],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,a){e&1&&(c(0,"div",1)(1,"div",2,0)(3,"div",3),it(4,Oe,0,0,"ng-template",4),m(),j(5,"div"),m()()),e&2&&(l(5),q("aria-live",a._live)("role",a._role)("id",a._liveElementId))},dependencies:[nt],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return i})(),Ve=new Q("mat-snack-bar-default-options",{providedIn:"root",factory:()=>new Z}),_e=(()=>{class i{_live=s(Zt);_injector=s(M);_breakpointObserver=s(dt);_parentSnackBar=s(i,{optional:!0,skipSelf:!0});_defaultConfig=s(Ve);_animationsDisabled=R();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=Pe;snackBarContainerComponent=Ne;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(){}openFromComponent(t,e){return this._attach(t,e)}openFromTemplate(t,e){return this._attach(t,e)}open(t,e="",a){let o=b(b({},this._defaultConfig),a);return o.data={message:t,action:e},o.announcementMessage===t&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,e){let a=e&&e.viewContainerRef&&e.viewContainerRef.injector,o=M.create({parent:a||this._injector,providers:[{provide:Z,useValue:e}]}),r=new St(this.snackBarContainerComponent,e.viewContainerRef,o),p=t.attach(r);return p.instance.snackBarConfig=e,p.instance}_attach(t,e){let a=b(b(b({},new Z),this._defaultConfig),e),o=this._createOverlay(a),r=this._attachSnackBarContainer(o,a),p=new U(r,o);if(t instanceof jt){let _=new qt(t,null,{$implicit:a.data,snackBarRef:p});p.instance=r.attachTemplatePortal(_)}else{let _=this._createInjector(a,p),Ce=new St(t,void 0,_),Se=r.attachComponentPortal(Ce);p.instance=Se.instance}return this._breakpointObserver.observe(D.HandsetPortrait).pipe(rt(o.detachments())).subscribe(_=>{o.overlayElement.classList.toggle(this.handsetCssClass,_.matches)}),a.announcementMessage&&r._onAnnounce.subscribe(()=>{this._live.announce(a.announcementMessage,a.politeness)}),this._animateSnackBar(p,a),this._openedSnackBarRef=p,this._openedSnackBarRef}_animateSnackBar(t,e){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),e.announcementMessage&&this._live.clear()}),e.duration&&e.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(e.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter()}_createOverlay(t){let e=new Jt;e.direction=t.direction;let a=ht(this._injector),o=t.direction==="rtl",r=t.horizontalPosition==="left"||t.horizontalPosition==="start"&&!o||t.horizontalPosition==="end"&&o,p=!r&&t.horizontalPosition!=="center";return r?a.left("0"):p?a.right("0"):a.centerHorizontally(),t.verticalPosition==="top"?a.top("0"):a.bottom("0"),e.positionStrategy=a,e.disableAnimations=this._animationsDisabled,te(this._injector,e)}_createInjector(t,e){let a=t&&t.viewContainerRef&&t.viewContainerRef.injector;return M.create({parent:a||this._injector,providers:[{provide:U,useValue:e},{provide:bt,useValue:t.data}]})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function He(i,n){if(i&1&&(c(0,"mat-icon"),h(1,"task_alt"),m()),i&2){let t=d();P("color",t.colorVar())}}function Qe(i,n){if(i&1&&(c(0,"mat-icon"),h(1,"warning"),m()),i&2){let t=d();P("color",t.colorVar())}}function qe(i,n){if(i&1&&(c(0,"mat-icon"),h(1,"info"),m()),i&2){let t=d();P("color",t.colorVar())}}var be=(()=>{class i{snackBarRef=s(U);data=s(bt);colorVar=T(()=>{switch(this.data.type){case"SUCCESS":return"var(--par-color-success)";case"ERROR":return"var(--par-color-error)";default:return"var(--par-color-primary)"}});static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["app-custom-snackbar"]],decls:10,vars:12,consts:[[1,"flex","items-center","gap-3","px-4","py-3","rounded-2xl","shadow-(--mat-sys-level2)","w-full","max-w-[400px]","border"],[1,"flex","items-center","justify-center","w-10","h-10","rounded-xl","shrink-0"],[3,"color"],[1,"grow","text-sm","font-medium","leading-tight","whitespace-pre-line"],["mat-icon-button","",1,"shrink-0",3,"click"],[1,"text-[20px]!","w-[20px]!","h-[20px]!"]],template:function(e,a){if(e&1&&(c(0,"div",0)(1,"div",1),f(2,He,2,2,"mat-icon",2)(3,Qe,2,2,"mat-icon",2)(4,qe,2,2,"mat-icon",2),m(),c(5,"div",3),h(6),m(),c(7,"button",4),x("click",function(){return a.snackBarRef.dismiss()}),c(8,"mat-icon",5),h(9,"close"),m()()()),e&2){let o;P("background-color","color-mix(in srgb, "+a.colorVar()+", white 92%)")("color","color-mix(in srgb, "+a.colorVar()+", black 60%)")("border-color","color-mix(in srgb, "+a.colorVar()+", white 80%)"),l(),P("background-color","color-mix(in srgb, "+a.colorVar()+", white 80%)"),l(),v((o=a.data.type)==="SUCCESS"?2:o==="ERROR"?3:4),l(4),A(" ",a.data.title," "),l(),P("color",a.colorVar())}},dependencies:[ut,_t,V,pt],encapsulation:2,changeDetection:0})}return i})();function Ge(i,n){if(i&1&&(c(0,"button",2),h(1),m()),i&2){let t=d();F("mat-dialog-close",!1),l(),A(" ",t.dialogData.cancelButtonLabel," ")}}function $e(i,n){if(i&1&&(c(0,"button",4),h(1),m()),i&2){let t=d();k("button-error",t.dialogData.isConfirmErrorButton),F("mat-dialog-close",!0),l(),A(" ",t.dialogData.confirmButtonLabel," ")}}var ge=(()=>{class i{dialogData=s(ae);constructor(){this._setInitialData()}_setInitialData(){this.dialogData=b({title:this.dialogData.title,content:"",cancelButtonLabel:"Anuluj",confirmButtonLabel:"Potwierd\u017A",hideCancelButton:!1,hideConfirmButton:!1,isConfirmErrorButton:!0},this.dialogData)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["app-info-dialog"]],decls:7,vars:4,consts:[["mat-dialog-title",""],[1,"p-(--par-container-padding)","par-font-small"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","",3,"mat-dialog-close","button-error"],["mat-flat-button","",3,"mat-dialog-close"]],template:function(e,a){e&1&&(c(0,"div",0),h(1),m(),c(2,"div",1),h(3),m(),c(4,"mat-dialog-actions"),f(5,Ge,2,2,"button",2),f(6,$e,2,4,"button",3),m()),e&2&&(l(),N(a.dialogData.title),l(2),A(" ",a.dialogData.content,`
`),l(2),v(a.dialogData.hideCancelButton?-1:5),l(),v(a.dialogData.hideConfirmButton?-1:6))},dependencies:[ce,oe,se,re,V,$],encapsulation:2,changeDetection:0})}return i})();var fe=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=E({type:i});static \u0275inj=I({imports:[G]})}return i})();var Et=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected=null;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new g;constructor(n=!1,t,e=!0,a){this._multiple=n,this._emitChanges=e,this.compareWith=a,t&&t.length&&(n?t.forEach(o=>this._markSelected(o)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(e=>this._markSelected(e));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...n){this._verifyValueAssignment(n),n.forEach(e=>this._unmarkSelected(e));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...n){this._verifyValueAssignment(n);let t=this.selected,e=new Set(n.map(o=>this._getConcreteValue(o)));n.forEach(o=>this._markSelected(o)),t.filter(o=>!e.has(this._getConcreteValue(o,e))).forEach(o=>this._unmarkSelected(o));let a=this._hasQueuedChanges();return this._emitChangeEvent(),a}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();let t=this._hasQueuedChanges();return n&&this._emitChangeEvent(),t}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){n.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(n,t){if(this.compareWith){t=t??this._selection;for(let e of t)if(this.compareWith(n,e))return e;return n}else return n}};var xa=(()=>{class i{_animationsDisabled=R();state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(e,a){e&2&&k("mat-pseudo-checkbox-indeterminate",a.state==="indeterminate")("mat-pseudo-checkbox-checked",a.state==="checked")("mat-pseudo-checkbox-disabled",a.disabled)("mat-pseudo-checkbox-minimal",a.appearance==="minimal")("mat-pseudo-checkbox-full",a.appearance==="full")("_mat-animation-noopable",a._animationsDisabled)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(e,a){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-minimal-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-pseudo-checkbox-full-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-pseudo-checkbox-full-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-pseudo-checkbox-full-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-full-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-pseudo-checkbox-full-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-full-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return i})();var ve=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=E({type:i});static \u0275inj=I({imports:[G]})}return i})();var xe=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=E({type:i});static \u0275inj=I({imports:[Wt,le,ve,G,fe]})}return i})();var gt=(function(i){return i.DISMISS="DISMISS",i.CANCEL="CANCEL",i.CONFIRM="CONFIRM",i})(gt||{});function We(i,n){if(i&1&&j(0,"div",5),i&2){let t=d();F("innerHTML",t.data.description,kt)}}function Ze(i,n){if(i&1&&(c(0,"mat-icon"),h(1),m()),i&2){let t=d(2).$implicit;l(),N(t.icon)}}function Xe(i,n){if(i&1){let t=at();c(0,"button",10),x("click",function(){K(t);let a=d().$implicit,o=d();return Y(o.choose(a.result))}),f(1,Ze,2,1,"mat-icon"),c(2,"div"),h(3),m()()}if(i&2){let t=d().$implicit;k("button-error",t.isError)("button-success",t.isSuccess),l(),v(t.icon?1:-1),l(2),N(t.label)}}function Ke(i,n){if(i&1&&(c(0,"mat-icon"),h(1),m()),i&2){let t=d(2).$implicit;l(),N(t.icon)}}function Ye(i,n){if(i&1){let t=at();c(0,"button",11),x("click",function(){K(t);let a=d().$implicit,o=d();return Y(o.choose(a.result))}),f(1,Ke,2,1,"mat-icon"),c(2,"div"),h(3),m()()}if(i&2){let t=d().$implicit;l(),v(t.icon?1:-1),l(2),N(t.label)}}function Je(i,n){if(i&1&&f(0,Xe,4,6,"button",8)(1,Ye,4,2,"button",9),i&2){let t=n.$implicit;v(t.isPrimary||t.isSuccess||t.isError?0:1)}}var ke=(()=>{class i{sheetRef=s(W);data=s(At);menuSheetResult=gt;sheetComponentRef={dismiss:()=>this.sheetRef.dismiss(),onDismiss:new g};constructor(){this.handleCancelSheet()}handleCancelSheet(){ot(this.sheetRef.backdropClick(),this.sheetRef.keydownEvents().pipe(O(t=>t.key==="Escape"))).pipe(me()).subscribe(()=>{this.sheetRef.dismiss(),this.sheetComponentRef.onDismiss.next(gt.CANCEL)})}choose(t){this.sheetComponentRef.onDismiss.next(t)}ngOnDestroy(){this.sheetComponentRef.onDismiss.complete()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["app-menu-sheet"]],decls:13,vars:2,consts:[[1,"flex","flex-col","py-4"],[1,"flex","items-center","gap-2"],[3,"innerHTML"],["matIconButton","",1,"ml-auto",3,"click"],[1,"mt-3","mb-5"],[1,"par-font-small","mb-5","leading-normal","whitespace-pre-wrap",3,"innerHTML"],[1,"relative","-translate-x-1/2","left-1/2","w-dvw","pb-2","overflow-auto"],[1,"flex","flex-row","gap-2","px-4","flex-nowrap"],["mat-flat-button","",1,"flex","justify-center!","flex-1",3,"button-error","button-success"],["mat-stroked-button","",1,"flex","justify-center!","flex-1"],["mat-flat-button","",1,"flex","justify-center!","flex-1",3,"click"],["mat-stroked-button","",1,"flex","justify-center!","flex-1",3,"click"]],template:function(e,a){e&1&&(c(0,"div",0)(1,"div")(2,"div",1),j(3,"div",2),c(4,"button",3),x("click",function(){return a.sheetComponentRef.onDismiss.next(a.menuSheetResult.DISMISS)}),c(5,"mat-icon"),h(6," close "),m()()(),j(7,"hr",4),f(8,We,1,1,"div",5),m(),c(9,"div",6)(10,"div",7),Nt(11,Je,2,1,null,null,Pt),m()()()),e&2&&(l(3),F("innerHTML",a.data.title||"",kt),l(5),v(a.data.description?8:-1),l(3),Vt(a.data.menuItems))},dependencies:[xe,ut,_t,V,$,pt],encapsulation:2,changeDetection:0})}return i})();var ye=(()=>{class i{_matDialog=s(ne);_snackBar=s(_e);_sheet=s(pe);openSheet(t,e,a){return this._sheet.open(t,{data:e,backdropClass:"backdrop-invisible",disableClose:a?.disableClose??!1,hasBackdrop:a?.hasBackdrop??!0}).instance.sheetComponentRef}openMenuSheet(t,e){return this.openSheet(ke,t,e)}openSnackbar(t,e="DEFAULT"){setTimeout(()=>{this._snackBar.openFromComponent(be,{data:{title:t,type:e},panelClass:"custom-snackbar-container",duration:4e3,horizontalPosition:"center",verticalPosition:"top"})},0)}openInfoDialog(t,e){return this._matDialog.open(ge,{data:t,disableClose:e?.disableClose??!1})}cleanUp(){this._sheet.dismiss(),this._snackBar.dismiss(),this._matDialog.closeAll()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ft=(function(i){return i.MAIN="main",i.AUTH="auth",i.AUTH_LOGIN="auth/logowanie",i.AUTH_REGISTER="auth/rejestracja",i.AUTH_FORGOT_PASSWORD="auth/przypomnij-haslo",i.AUTH_RESET_PASSWORD="auth/zmien-haslo",i.CONFIRM_EMAIL_AFTER_REGISTER="auth/potwierdz-rejestracje",i.FINISH_REGISTER_GOOGLE="auth/potwierdz-rejestracje-google",i.SETTINGS="ustawienia",i.PRIVACY_POLICY="polityka-prywatnosci",i})(ft||{});var C={environmentType:"PREP",geocodeApi:"https://services.gugik.gov.pl/uug",geoStatApi:"https://geo.stat.gov.pl/api/fts/ref/qq",colors:{primary:"#1098f7",success:"#06bd8c",error:"#e0505c"},sentryDsn:"https://069cf899b4e34bae773e06ff484ff274@o4510541561462784.ingest.de.sentry.io/4510541566246992",apiUrl:"https://parkowanko.onrender.com/api",googleClientId:"232236974500-cd550dd02vo2cb82qi2e54ai4l8825s5.apps.googleusercontent.com"};function H(i){if(!i)return"Wyst\u0105pi\u0142 nieoczekiwany b\u0142\u0105d";if(typeof i=="string")return i;let n=i.errors||i;if(typeof n=="object"&&n!==null){let t=Object.values(n);for(let e of t){if(typeof e=="string")return e;if(Array.isArray(e)&&typeof e[0]=="string")return e[0]}}return"B\u0142\u0105d podczas przetwarzania \u017C\u0105dania"}var we=(()=>{class i{_document=s(ct);_isSpinnerActiveCount=z(0);isSpinnerActive=T(()=>this._isSpinnerActiveCount()>0);show(){this._isSpinnerActiveCount.update(t=>++t),this._updateDOM()}hide(t=0){setTimeout(()=>{this._isSpinnerActiveCount.update(e=>e===0?0:--e),this._updateDOM()},t)}_updateDOM(){let t=this._document.getElementById("global-spinner"),e=this._document.getElementsByTagName("app-root")[0];!t||!e||(t.style.display=this.isSpinnerActive()?"flex":"none",e.style.zIndex=this.isSpinnerActive()?"-1":"0",e.style.position=this.isSpinnerActive()?"relative":"static")}static \u0275fac=function(e){return new(e||i)};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Mn=(()=>{class i{_http=s(Ht);_router=s(Qt);_sharedUtilsService=s(ye);_globalSpinnerService=s(we);_tokenExpirationTimer;_currentUser=z(null);currentUser=this._currentUser.asReadonly();isLoggedIn=T(()=>!!this._currentUser());constructor(){this._tryAutoLogin()}login(t){return this._globalSpinnerService.show(),this._http.post(`${C.apiUrl}/auth/login/`,t).pipe(X(e=>this.handleAuthSuccess(e)),B(e=>{let a=H(e.error);return this._sharedUtilsService.openSnackbar(a||"Nieprawid\u0142owy login lub has\u0142o","ERROR"),L(()=>e)}),S(()=>this._globalSpinnerService.hide()))}register(t){return this._globalSpinnerService.show(),this._http.post(`${C.apiUrl}/auth/register/`,t).pipe(B(e=>{if(e.status===400){let a=H(e.error);this._sharedUtilsService.openSnackbar(a,"ERROR")}return L(()=>e)}),S(()=>this._globalSpinnerService.hide()))}confirmEmailAfterRegister(t){return this._globalSpinnerService.show(),this._http.post(`${C.apiUrl}/auth/register/confirm-email/`,{key:t}).pipe(X(e=>this.handleAuthSuccess(e)),S(()=>this._globalSpinnerService.hide()))}resendConfirmationEmail(t){return this._globalSpinnerService.show(),this._http.post(`${C.apiUrl}/auth/register/resend-confirm-email/`,{email:t}).pipe(B(e=>{let a=H(e.error);return this._sharedUtilsService.openSnackbar(a,"ERROR"),L(()=>e)}),S(()=>this._globalSpinnerService.hide()))}refreshToken(t){return this._http.post(`${C.apiUrl}/auth/token/refresh/`,{refresh:t}).pipe(X(e=>this._setAuthAfterRefreshTokens(e)))}requestPasswordReset(t){return this._globalSpinnerService.show(),this._http.post(`${C.apiUrl}/auth/password-reset/`,{email:t}).pipe(B(e=>{let a=H(e.error);return this._sharedUtilsService.openSnackbar(a,"ERROR"),L(()=>e)}),S(()=>this._globalSpinnerService.hide()))}validatePasswordResetToken(t){return this._globalSpinnerService.show(),this._http.post(`${C.apiUrl}/auth/password-reset/validate-token/`,{token:t}).pipe(S(()=>this._globalSpinnerService.hide()))}confirmPasswordReset(t){return this._globalSpinnerService.show(),this._http.post(`${C.apiUrl}/auth/password-reset/confirm/`,t).pipe(B(e=>{let a=H(e.error);return this._sharedUtilsService.openSnackbar(a,"ERROR"),L(()=>e)}),S(()=>this._globalSpinnerService.hide()))}deleteAccount(){return this._globalSpinnerService.show(),this._http.delete(`${C.apiUrl}/auth/user/delete/`).pipe(X(()=>this.logout()),B(t=>{let e=H(t.error);return this._sharedUtilsService.openSnackbar(e||"B\u0142\u0105d podczas usuwania konta","ERROR"),L(()=>t)}),S(()=>this._globalSpinnerService.hide()))}handleAuthSuccess(t){this._currentUser.set(t.user),localStorage.setItem("auth_data",JSON.stringify(t)),this._setupAutoLogoutFromToken(t.access),this._router.navigate([ft.MAIN],{replaceUrl:!0})}logout(){clearTimeout(this._tokenExpirationTimer),this._currentUser.set(null),localStorage.removeItem("auth_data"),this._router.navigate([ft.AUTH_LOGIN])}getAccessToken(){return this._getStoredAuth()?.access??null}getRefreshToken(){return this._getStoredAuth()?.refresh??null}_getStoredAuth(){let t=localStorage.getItem("auth_data");return t?JSON.parse(t):null}_decodeJwt(t){try{let e=t.split(".")[1],a=atob(e);return JSON.parse(a)}catch{return null}}_setupAutoLogoutFromToken(t){let e=this._decodeJwt(t)?.exp;e&&this._setupAutoLogout(e)}_setAuthAfterRefreshTokens(t){let e=this._getStoredAuth();e&&(localStorage.setItem("auth_data",JSON.stringify({user:e.user,access:t.access,refresh:t.refresh})),this._setupAutoLogoutFromToken(t.access))}_setupAutoLogout(t){clearTimeout(this._tokenExpirationTimer);let e=t*1e3-Date.now();this._tokenExpirationTimer=setTimeout(()=>this.logout(),Math.max(e,0))}_tryAutoLogin(){let t=this._getStoredAuth(),e=t?.access;if(!e||!t?.user)return;let a=this._decodeJwt(e)?.exp;!a||a*1e3<Date.now()||(this._currentUser.set(t.user),this._setupAutoLogout(a))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{C as a,At as b,W as c,Te as d,Ve as e,me as f,mi as g,di as h,Et as i,xa as j,ve as k,xe as l,gt as m,ye as n,ft as o,we as p,Mn as q};
//# sourceMappingURL=chunk-PFSVZZ3Q.js.map
