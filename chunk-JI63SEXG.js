import{A as yi,B as ki,a as oe,b as ai,c as ri,d as kt,h as mi,j as hi,l as Pt,n as ui,r as pi,s as fi,u as gi,w as _i,x as bi,y as vi}from"./chunk-3JLZUJGH.js";import{a as wi,b as Si,c as Ci,e as Mi}from"./chunk-VWNVBQSR.js";import{h as ni}from"./chunk-JHOUOHQS.js";import{a as jt,b as zt}from"./chunk-SDIA7KGT.js";import{A as et,Ab as Ot,Ac as oi,Ba as u,Bb as Lt,D as At,Da as ne,Ea as Ge,G as te,Ga as $e,Gb as G,Hb as D,Jb as b,Jc as Ft,Kb as $,Kc as si,Lb as O,Nc as ci,O as Tt,Pa as y,Pc as li,Q as It,Qa as B,Qb as re,Ra as K,S as g,Ta as We,V as T,Va as bt,W as P,Wa as vt,Wc as rt,Xb as h,Xc as di,Y as I,Yb as c,Yc as L,Zb as at,Zc as j,_ as s,a as Jt,ac as Je,ba as ee,ca as gt,d as Ve,da as _t,db as nt,e as w,eb as S,ec as ti,fb as C,g as Ue,ga as k,ha as Rt,hb as Xe,hc as ei,hd as Bt,ia as H,ib as Ze,id as xi,j as He,jb as Ye,jd as ot,k as tt,ka as Ke,kb as q,la as qe,lb as m,mb as p,md as W,nb as Q,pa as v,qa as it,rb as yt,rc as ii,tb as M,ua as Nt,vb as _,w as Et,wa as Qe,y as U,za as ie,zb as ae}from"./chunk-6UD2DY5V.js";import{a as f,b as F}from"./chunk-VZBGOO6O.js";function nn(i,t){}var Di="_mat-bottom-sheet-enter",Ei="_mat-bottom-sheet-exit",an=(()=>{class i extends pi{_breakpointSubscription;_animationsDisabled=j();_animationState="void";_animationStateChanged=new Ke;_destroyed=!1;constructor(){super();let e=s(Ft);this._breakpointSubscription=e.observe([L.Medium,L.Large,L.XLarge]).subscribe(()=>{let n=this._elementRef.nativeElement.classList;n.toggle("mat-bottom-sheet-container-medium",e.isMatched(L.Medium)),n.toggle("mat-bottom-sheet-container-large",e.isMatched(L.Large)),n.toggle("mat-bottom-sheet-container-xlarge",e.isMatched(L.XLarge))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._animationsDisabled&&this._simulateAnimation(Di))}exit(){this._destroyed||(this._elementRef.nativeElement.setAttribute("mat-exit",""),this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._animationsDisabled&&this._simulateAnimation(Ei))}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_simulateAnimation(e){this._ngZone.run(()=>{this._handleAnimationEvent(!0,e),setTimeout(()=>this._handleAnimationEvent(!1,e))})}_trapFocus(){super._trapFocus({preventScroll:!0})}_handleAnimationEvent(e,n){let a=n===Di;(a||n===Ei)&&this._animationStateChanged.emit({toState:a?"visible":"hidden",phase:e?"start":"done"})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=y({type:i,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:9,hostBindings:function(n,a){n&1&&M("animationstart",function(o){return a._handleAnimationEvent(!0,o.animationName)})("animationend",function(o){return a._handleAnimationEvent(!1,o.animationName)})("animationcancel",function(o){return a._handleAnimationEvent(!1,o.animationName)}),n&2&&(nt("role",a._config.role)("aria-modal",a._config.ariaModal)("aria-label",a._config.ariaLabel),D("mat-bottom-sheet-container-animations-enabled",!a._animationsDisabled)("mat-bottom-sheet-container-enter",a._animationState==="visible")("mat-bottom-sheet-container-exit",a._animationState==="hidden"))},features:[bt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,a){n&1&&vt(0,nn,0,0,"ng-template",0)},dependencies:[kt],styles:[`@keyframes _mat-bottom-sheet-enter{from{transform:translateY(100%)}to{transform:none}}@keyframes _mat-bottom-sheet-exit{from{transform:none}to{transform:translateY(100%)}}.mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;position:relative;background:var(--mat-bottom-sheet-container-background-color, var(--mat-sys-surface-container-low));color:var(--mat-bottom-sheet-container-text-color, var(--mat-sys-on-surface));font-family:var(--mat-bottom-sheet-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-bottom-sheet-container-text-size, var(--mat-sys-body-large-size));line-height:var(--mat-bottom-sheet-container-text-line-height, var(--mat-sys-body-large-line-height));font-weight:var(--mat-bottom-sheet-container-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-bottom-sheet-container-text-tracking, var(--mat-sys-body-large-tracking))}@media(forced-colors: active){.mat-bottom-sheet-container{outline:1px solid}}.mat-bottom-sheet-container-animations-enabled{transform:translateY(100%)}.mat-bottom-sheet-container-animations-enabled.mat-bottom-sheet-container-enter{animation:_mat-bottom-sheet-enter 195ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-bottom-sheet-container-animations-enabled.mat-bottom-sheet-container-exit{animation:_mat-bottom-sheet-exit 375ms cubic-bezier(0.4, 0, 1, 1) backwards}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape, 28px);border-top-right-radius:var(--mat-bottom-sheet-container-shape, 28px)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}
`],encapsulation:2})}return i})(),ce=new I("MatBottomSheetData"),se=class{viewContainerRef;injector;panelClass;direction;data=null;hasBackdrop=!0;backdropClass;disableClose=!1;ariaLabel=null;ariaModal=!1;closeOnNavigation=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;height="";minHeight;maxHeight},st=class{_ref;get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}containerInstance;disableClose;_afterOpened=new w;_result;_closeFallbackTimeout;constructor(t,e,n){this._ref=t,this.containerInstance=n,this.disableClose=e.disableClose,n._animationStateChanged.pipe(U(a=>a.phase==="done"&&a.toState==="visible"),At(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(U(a=>a.phase==="done"&&a.toState==="hidden"),At(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),t.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),Et(this.backdropClick(),this.keydownEvents().pipe(U(a=>a.keyCode===27))).subscribe(a=>{!this.disableClose&&(a.type!=="keydown"||!li(a))&&(a.preventDefault(),this.dismiss())})}dismiss(t){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe(U(e=>e.phase==="start"),At(1)).subscribe(()=>{this._closeFallbackTimeout=setTimeout(()=>this._ref.close(this._result),500),this._ref.overlayRef.detachBackdrop()}),this._result=t,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}},rn=new I("mat-bottom-sheet-default-options"),Ai=(()=>{class i{_injector=s(k);_parentBottomSheet=s(i,{optional:!0,skipSelf:!0});_animationsDisabled=j();_defaultOptions=s(rn,{optional:!0});_bottomSheetRefAtThisLevel=null;_dialog=s(fi);get _openedBottomSheetRef(){let e=this._parentBottomSheet;return e?e._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(e){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=e:this._bottomSheetRefAtThisLevel=e}constructor(){}open(e,n){let a=f(f({},this._defaultOptions||new se),n),r;return this._dialog.open(e,F(f({},a),{disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:an,scrollStrategy:a.scrollStrategy||mi(this._injector),positionStrategy:Pt(this._injector).centerHorizontally().bottom("0"),disableAnimations:this._animationsDisabled,templateContext:()=>({bottomSheetRef:r}),providers:(o,l,d)=>(r=new st(o,a,d),[{provide:st,useValue:r},{provide:ce,useValue:a.data}])})),r.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===r&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>r.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):r.containerInstance.enter(),this._openedBottomSheetRef=r,r}dismiss(e){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(e)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function on(i,t){if(i&1){let e=yt();m(0,"div",1)(1,"button",2),M("click",function(){gt(e);let a=_();return _t(a.action())}),b(2),p()()}if(i&2){let e=_();u(2),O(" ",e.data.action," ")}}var sn=["label"];function cn(i,t){}var ln=Math.pow(2,31)-1,X=class{_overlayRef;instance;containerInstance;_afterDismissed=new w;_afterOpened=new w;_onAction=new w;_durationTimeoutId;_dismissedByAction=!1;constructor(t,e){this._overlayRef=e,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,ln))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Vt=new I("MatSnackBarData"),ct=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},dn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=K({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return i})(),mn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=K({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return i})(),hn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=K({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return i})(),un=(()=>{class i{snackBarRef=s(X);data=s(Vt);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=y({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(n,a){n&1&&(m(0,"div",0),b(1),p(),S(2,on,3,1,"div",1)),n&2&&(u(),O(" ",a.data.message,`
`),u(),C(a.hasAction?2:-1))},dependencies:[ot,dn,mn,hn],styles:[`.mat-mdc-simple-snack-bar{display:flex}.mat-mdc-simple-snack-bar .mat-mdc-snack-bar-label{max-height:50vh;overflow:auto}
`],encapsulation:2,changeDetection:0})}return i})(),le="_mat-snack-bar-enter",de="_mat-snack-bar-exit",pn=(()=>{class i extends ri{_ngZone=s(qe);_elementRef=s(Nt);_changeDetectorRef=s(ti);_platform=s(oi);_animationsDisabled=j();snackBarConfig=s(ct);_document=s(Rt);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=s(k);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new w;_onExit=new w;_onEnter=new w;_animationState="void";_live;_label;_role;_liveElementId=s(di).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}attachDomPortal=e=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),n};onAnimationEnd(e){e===de?this._completeExit():e===le&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?ne(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(le)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(le)},200)))}exit(){return this._destroyed?He(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?ne(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(de)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(de),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(o=>e.classList.add(o)):e.classList.add(n)),this._exposeToModals();let a=this._label.nativeElement,r="mdc-snackbar__label";a.classList.toggle(r,!a.querySelector(`.${r}`))}_exposeToModals(){let e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let a=0;a<n.length;a++){let r=n[a],o=r.getAttribute("aria-owns");this._trackedModals.add(r),o?o.indexOf(e)===-1&&r.setAttribute("aria-owns",o+" "+e):r.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let n=e.getAttribute("aria-owns");if(n){let a=n.replace(this._liveElementId,"").trim();a.length>0?e.setAttribute("aria-owns",a):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,n=e.querySelector("[aria-hidden]"),a=e.querySelector("[aria-live]");if(n&&a){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(r=document.activeElement),n.removeAttribute("aria-hidden"),a.appendChild(n),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=y({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,a){if(n&1&&ae(kt,7)(sn,7),n&2){let r;Ot(r=Lt())&&(a._portalOutlet=r.first),Ot(r=Lt())&&(a._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,a){n&1&&M("animationend",function(o){return a.onAnimationEnd(o.animationName)})("animationcancel",function(o){return a.onAnimationEnd(o.animationName)}),n&2&&D("mat-snack-bar-container-enter",a._animationState==="visible")("mat-snack-bar-container-exit",a._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!a._animationsDisabled)},features:[bt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,a){n&1&&(m(0,"div",1)(1,"div",2,0)(3,"div",3),vt(4,cn,0,0,"ng-template",4),p(),Q(5,"div"),p()()),n&2&&(u(5),nt("aria-live",a._live)("role",a._role)("id",a._liveElementId))},dependencies:[kt],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return i})(),fn=new I("mat-snack-bar-default-options",{providedIn:"root",factory:()=>new ct}),Ti=(()=>{class i{_live=s(ci);_injector=s(k);_breakpointObserver=s(Ft);_parentSnackBar=s(i,{optional:!0,skipSelf:!0});_defaultConfig=s(fn);_animationsDisabled=j();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=un;snackBarContainerComponent=pn;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",a){let r=f(f({},this._defaultConfig),a);return r.data={message:e,action:n},r.announcementMessage===e&&(r.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,r)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){let a=n&&n.viewContainerRef&&n.viewContainerRef.injector,r=k.create({parent:a||this._injector,providers:[{provide:ct,useValue:n}]}),o=new oe(this.snackBarContainerComponent,n.viewContainerRef,r),l=e.attach(o);return l.instance.snackBarConfig=n,l.instance}_attach(e,n){let a=f(f(f({},new ct),this._defaultConfig),n),r=this._createOverlay(a),o=this._attachSnackBarContainer(r,a),l=new X(o,r);if(e instanceof Ge){let d=new ai(e,null,{$implicit:a.data,snackBarRef:l});l.instance=o.attachTemplatePortal(d)}else{let d=this._createInjector(a,l),x=new oe(e,void 0,d),ft=o.attachComponentPortal(x);l.instance=ft.instance}return this._breakpointObserver.observe(L.HandsetPortrait).pipe(Tt(r.detachments())).subscribe(d=>{r.overlayElement.classList.toggle(this.handsetCssClass,d.matches)}),a.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(a.announcementMessage,a.politeness)}),this._animateSnackBar(l,a),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let n=new hi;n.direction=e.direction;let a=Pt(this._injector),r=e.direction==="rtl",o=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!r||e.horizontalPosition==="end"&&r,l=!o&&e.horizontalPosition!=="center";return o?a.left("0"):l?a.right("0"):a.centerHorizontally(),e.verticalPosition==="top"?a.top("0"):a.bottom("0"),n.positionStrategy=a,n.disableAnimations=this._animationsDisabled,ui(this._injector,n)}_createInjector(e,n){let a=e&&e.viewContainerRef&&e.viewContainerRef.injector;return k.create({parent:a||this._injector,providers:[{provide:X,useValue:n},{provide:Vt,useValue:e.data}]})}static \u0275fac=function(n){return new(n||i)};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function _n(i,t){if(i&1&&(m(0,"mat-icon"),b(1,"task_alt"),p()),i&2){let e=_();G("color",e.colorVar())}}function bn(i,t){if(i&1&&(m(0,"mat-icon"),b(1,"warning"),p()),i&2){let e=_();G("color",e.colorVar())}}function vn(i,t){if(i&1&&(m(0,"mat-icon"),b(1,"info"),p()),i&2){let e=_();G("color",e.colorVar())}}var Ri=(()=>{class i{snackBarRef=s(X);data=s(Vt);colorVar=c(()=>{switch(this.data.type){case"SUCCESS":return"var(--par-color-success)";case"ERROR":return"var(--par-color-error)";default:return"var(--par-color-primary)"}});static \u0275fac=function(n){return new(n||i)};static \u0275cmp=y({type:i,selectors:[["app-custom-snackbar"]],decls:10,vars:12,consts:[[1,"flex","items-center","gap-3","px-4","py-3","rounded-2xl","shadow-(--mat-sys-level2)","w-full","max-w-[400px]","border"],[1,"flex","items-center","justify-center","w-10","h-10","rounded-xl","shrink-0"],[3,"color"],[1,"grow","text-sm","font-medium","leading-tight","whitespace-pre-line"],["mat-icon-button","",1,"shrink-0",3,"click"],[1,"text-[20px]!","w-[20px]!","h-[20px]!"]],template:function(n,a){if(n&1&&(m(0,"div",0)(1,"div",1),S(2,_n,2,2,"mat-icon",2)(3,bn,2,2,"mat-icon",2)(4,vn,2,2,"mat-icon",2),p(),m(5,"div",3),b(6),p(),m(7,"button",4),M("click",function(){return a.snackBarRef.dismiss()}),m(8,"mat-icon",5),b(9,"close"),p()()()),n&2){let r;G("background-color","color-mix(in srgb, "+a.colorVar()+", white 92%)")("color","color-mix(in srgb, "+a.colorVar()+", black 60%)")("border-color","color-mix(in srgb, "+a.colorVar()+", white 80%)"),u(),G("background-color","color-mix(in srgb, "+a.colorVar()+", white 80%)"),u(),C((r=a.data.type)==="SUCCESS"?2:r==="ERROR"?3:4),u(4),O(" ",a.data.title," "),u(),G("color",a.colorVar())}},dependencies:[zt,jt,W,Bt],encapsulation:2,changeDetection:0})}return i})();function yn(i,t){if(i&1&&(m(0,"button",2),b(1),p()),i&2){let e=_();q("mat-dialog-close",!1),u(),O(" ",e.dialogData.cancelButtonLabel," ")}}function kn(i,t){if(i&1&&(m(0,"button",4),b(1),p()),i&2){let e=_();D("button-error",e.dialogData.isConfirmErrorButton),q("mat-dialog-close",!0),u(),O(" ",e.dialogData.confirmButtonLabel," ")}}var Ni=(()=>{class i{dialogData=s(gi);constructor(){this._setInitialData()}_setInitialData(){this.dialogData=f({title:this.dialogData.title,content:"",cancelButtonLabel:"Anuluj",confirmButtonLabel:"Potwierd\u017A",hideCancelButton:!1,hideConfirmButton:!1,isConfirmErrorButton:!0},this.dialogData)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=y({type:i,selectors:[["app-info-dialog"]],decls:7,vars:4,consts:[["mat-dialog-title",""],[1,"p-(--par-container-padding)"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","",3,"mat-dialog-close","button-error"],["mat-flat-button","",3,"mat-dialog-close"]],template:function(n,a){n&1&&(m(0,"div",0),b(1),p(),m(2,"div",1),b(3),p(),m(4,"mat-dialog-actions"),S(5,yn,2,2,"button",2),S(6,kn,2,4,"button",3),p()),n&2&&(u(),$(a.dialogData.title),u(2),O(" ",a.dialogData.content,`
`),u(2),C(a.dialogData.hideCancelButton?-1:5),u(),C(a.dialogData.hideConfirmButton?-1:6))},dependencies:[ki,bi,vi,yi,W,ot],encapsulation:2,changeDetection:0})}return i})();function Oi(i){i||(i=s(H));let t=new Ve(e=>{if(i.destroyed){e.next();return}return i.onDestroy(e.next.bind(e))});return e=>e.pipe(Tt(t))}function Cr(i,t){let e=t?.injector??s(k),n=new Ue(1),a=it(()=>{let r;try{r=i()}catch(o){h(()=>n.error(o));return}h(()=>n.next(r))},{injector:e,manualCleanup:!0});return e.get(H).onDestroy(()=>{a.destroy(),n.complete()}),n.asObservable()}function Mr(i,t){let n=!t?.manualCleanup?t?.injector?.get(H)??s(H):null,a=wn(t?.equal),r;t?.requireSync?r=v({kind:0},{equal:a}):r=v({kind:1,value:t?.initialValue},{equal:a});let o,l=i.subscribe({next:d=>r.set({kind:1,value:d}),error:d=>{r.set({kind:2,error:d}),o?.()},complete:()=>{o?.()}});if(t?.requireSync&&r().kind===0)throw new g(601,!1);return o=n?.onDestroy(l.unsubscribe.bind(l)),c(()=>{let d=r();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new g(601,!1)}},{equal:t?.equal})}function wn(i=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&i(t.value,e.value)}var Li=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=B({type:i});static \u0275inj=P({imports:[rt]})}return i})();var me=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected=null;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new w;constructor(t=!1,e,n=!0,a){this._multiple=t,this._emitChanges=n,this.compareWith=a,e&&e.length&&(t?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(n=>this._markSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(n=>this._unmarkSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,n=new Set(t.map(r=>this._getConcreteValue(r)));t.forEach(r=>this._markSelected(r)),e.filter(r=>!n.has(this._getConcreteValue(r,n))).forEach(r=>this._unmarkSelected(r));let a=this._hasQueuedChanges();return this._emitChangeEvent(),a}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let n of e)if(this.compareWith(t,n))return n;return t}else return t}};var Pr=(()=>{class i{_animationsDisabled=j();state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=y({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(n,a){n&2&&D("mat-pseudo-checkbox-indeterminate",a.state==="indeterminate")("mat-pseudo-checkbox-checked",a.state==="checked")("mat-pseudo-checkbox-disabled",a.disabled)("mat-pseudo-checkbox-minimal",a.appearance==="minimal")("mat-pseudo-checkbox-full",a.appearance==="full")("_mat-animation-noopable",a._animationsDisabled)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(n,a){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-minimal-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-pseudo-checkbox-full-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-pseudo-checkbox-full-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-pseudo-checkbox-full-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-full-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-pseudo-checkbox-full-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-full-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return i})();var Fi=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=B({type:i});static \u0275inj=P({imports:[rt]})}return i})();var Pi=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=B({type:i});static \u0275inj=P({imports:[si,xi,Fi,rt,Li]})}return i})();var Ut=(function(i){return i.DISMISS="DISMISS",i.CANCEL="CANCEL",i.CONFIRM="CONFIRM",i})(Ut||{});function Sn(i,t){if(i&1&&Q(0,"div",5),i&2){let e=_();q("innerHTML",e.data.description,ie)}}function Cn(i,t){if(i&1&&(m(0,"mat-icon"),b(1),p()),i&2){let e=_(2).$implicit;u(),$(e.icon)}}function Mn(i,t){if(i&1){let e=yt();m(0,"button",10),M("click",function(){gt(e);let a=_().$implicit,r=_();return _t(r.choose(a.result))}),S(1,Cn,2,1,"mat-icon"),m(2,"div"),b(3),p()()}if(i&2){let e=_().$implicit;D("button-error",e.isError)("button-success",e.isSuccess),u(),C(e.icon?1:-1),u(2),$(e.label)}}function Dn(i,t){if(i&1&&(m(0,"mat-icon"),b(1),p()),i&2){let e=_(2).$implicit;u(),$(e.icon)}}function En(i,t){if(i&1){let e=yt();m(0,"button",11),M("click",function(){gt(e);let a=_().$implicit,r=_();return _t(r.choose(a.result))}),S(1,Dn,2,1,"mat-icon"),m(2,"div"),b(3),p()()}if(i&2){let e=_().$implicit;u(),C(e.icon?1:-1),u(2),$(e.label)}}function An(i,t){if(i&1&&S(0,Mn,4,6,"button",8)(1,En,4,2,"button",9),i&2){let e=t.$implicit;C(e.isPrimary||e.isSuccess||e.isError?0:1)}}var Bi=(()=>{class i{sheetRef=s(st);data=s(ce);menuSheetResult=Ut;sheetComponentRef={dismiss:()=>this.sheetRef.dismiss(),onDismiss:new w};constructor(){this.handleCancelSheet()}handleCancelSheet(){Et(this.sheetRef.backdropClick(),this.sheetRef.keydownEvents().pipe(U(e=>e.key==="Escape"))).pipe(Oi()).subscribe(()=>{this.sheetRef.dismiss(),this.sheetComponentRef.onDismiss.next(Ut.CANCEL)})}choose(e){this.sheetComponentRef.onDismiss.next(e)}ngOnDestroy(){this.sheetComponentRef.onDismiss.complete()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=y({type:i,selectors:[["app-menu-sheet"]],decls:13,vars:2,consts:[[1,"flex","flex-col","py-4"],[1,"flex","items-center","gap-2"],[3,"innerHTML"],["matIconButton","",1,"ml-auto",3,"click"],[1,"mt-3","mb-5"],[1,"font-small","mb-5","leading-normal","whitespace-pre-wrap",3,"innerHTML"],[1,"relative","-translate-x-1/2","left-1/2","w-dvw","pb-2","overflow-auto"],[1,"flex","flex-row","gap-2","px-4","flex-nowrap"],["mat-flat-button","",1,"flex","justify-center!","flex-1",3,"button-error","button-success"],["mat-stroked-button","",1,"flex","justify-center!","flex-1"],["mat-flat-button","",1,"flex","justify-center!","flex-1",3,"click"],["mat-stroked-button","",1,"flex","justify-center!","flex-1",3,"click"]],template:function(n,a){n&1&&(m(0,"div",0)(1,"div")(2,"div",1),Q(3,"div",2),m(4,"button",3),M("click",function(){return a.sheetComponentRef.onDismiss.next(a.menuSheetResult.DISMISS)}),m(5,"mat-icon"),b(6," close "),p()()(),Q(7,"hr",4),S(8,Sn,1,1,"div",5),p(),m(9,"div",6)(10,"div",7),Ze(11,An,2,1,null,null,Xe),p()()()),n&2&&(u(3),q("innerHTML",a.data.title||"",ie),u(5),C(a.data.description?8:-1),u(3),Ye(a.data.menuItems))},dependencies:[Pi,zt,jt,W,ot,Bt],encapsulation:2,changeDetection:0})}return i})();var ji=(()=>{class i{_matDialog=s(_i);_snackBar=s(Ti);_sheet=s(Ai);openSheet(e,n,a){return this._sheet.open(e,{data:n,backdropClass:"backdrop-invisible",disableClose:a?.disableClose??!1,hasBackdrop:a?.hasBackdrop??!0}).instance.sheetComponentRef}openMenuSheet(e,n){return this.openSheet(Bi,e,n)}openSnackbar(e,n="DEFAULT"){setTimeout(()=>{this._snackBar.openFromComponent(Ri,{data:{title:e,type:n},panelClass:"custom-snackbar-container",duration:4e3,horizontalPosition:"center",verticalPosition:"top"})},0)}openInfoDialog(e,n){return this._matDialog.open(Ni,{data:e,disableClose:n?.disableClose??!1})}cleanUp(){this._sheet.dismiss(),this._snackBar.dismiss(),this._matDialog.closeAll()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function lt(i){if(!i)return"Wyst\u0105pi\u0142 nieoczekiwany b\u0142\u0105d";if(typeof i=="string")return i;let t=i.errors||i;if(typeof t=="object"&&t!==null){let e=Object.values(t);for(let n of e){if(typeof n=="string")return n;if(Array.isArray(n)&&typeof n[0]=="string")return n[0]}}return"B\u0142\u0105d podczas przetwarzania \u017C\u0105dania"}var Z={environmentType:"PREP",geocodeApi:"https://services.gugik.gov.pl/uug",geoStatApi:"https://geo.stat.gov.pl/api/fts/ref/qq",colors:{primary:"#1098f7",success:"#06bd8c",error:"#e0505c"},sentryDsn:"https://069cf899b4e34bae773e06ff484ff274@o4510541561462784.ingest.de.sentry.io/4510541566246992",apiUrl:"https://parkowanko.onrender.com/api",googleClientId:"232236974500-cd550dd02vo2cb82qi2e54ai4l8825s5.apps.googleusercontent.com",facebookAppId:""};var Lo=(()=>{class i{_http=s(ii);_router=s(ni);_sharedUtilsService=s(ji);_tokenExpirationTimer;_currentUser=v(null);_isAuthenticating=v(!1);currentUser=this._currentUser.asReadonly();isLoggedIn=c(()=>!!this._currentUser());isAuthenticating=this._isAuthenticating.asReadonly();constructor(){this._tryAutoLogin()}login(e){return this._isAuthenticating.set(!0),this._http.post(`${Z.apiUrl}/auth/login/`,e).pipe(It(n=>this._setAuthData(n)),et(n=>{this._isAuthenticating.set(!1);let a=lt(n.error);return this._sharedUtilsService.openSnackbar(a||"Nieprawid\u0142owy login lub has\u0142o","ERROR"),tt(()=>n)}),te(()=>this._isAuthenticating.set(!1)))}register(e){return this._isAuthenticating.set(!0),this._http.post(`${Z.apiUrl}/auth/register/`,e).pipe(It(n=>this._setAuthData(n)),et(n=>{if(this._isAuthenticating.set(!1),n.status===400){let a=lt(n.error);this._sharedUtilsService.openSnackbar(a,"ERROR")}return tt(()=>n)}),te(()=>this._isAuthenticating.set(!1)))}refreshToken(e){return this._http.post(`${Z.apiUrl}/auth/refresh/`,{refresh:e}).pipe(It(n=>this._setAuthAfterRefreshTokens(n)))}requestPasswordReset(e){return this._http.post(`${Z.apiUrl}/auth/password-reset/`,{email:e}).pipe(et(n=>{let a=lt(n.error);return this._sharedUtilsService.openSnackbar(a,"ERROR"),tt(()=>n)}))}validatePasswordResetToken(e){return this._http.post(`${Z.apiUrl}/auth/password-reset/validate_token/`,{token:e}).pipe(et(n=>{let a=lt(n.error);return this._sharedUtilsService.openSnackbar(a,"ERROR"),tt(()=>n)}))}confirmPasswordReset(e){return this._http.post(`${Z.apiUrl}/auth/password-reset/confirm/`,e).pipe(et(n=>{let a=lt(n.error);return this._sharedUtilsService.openSnackbar(a,"ERROR"),tt(()=>n)}))}handleSocialAuthSuccess(e){this._setAuthData(e)}logout(){clearTimeout(this._tokenExpirationTimer),this._currentUser.set(null),localStorage.removeItem("auth_data"),this._router.navigate(["/auth"])}getAccessToken(){return this._getStoredAuth()?.access??null}getRefreshToken(){return this._getStoredAuth()?.refresh??null}_getStoredAuth(){let e=localStorage.getItem("auth_data");return e?JSON.parse(e):null}_decodeJwt(e){try{let n=e.split(".")[1],a=atob(n);return JSON.parse(a)}catch{return null}}_setAuthData(e){this._currentUser.set(e.user),localStorage.setItem("auth_data",JSON.stringify(e));let n=this._decodeJwt(e.access)?.exp;n&&this._setupAutoLogout(n),this._router.navigate(["/"])}_setAuthAfterRefreshTokens(e){let n=this._getStoredAuth();if(!n)return;let a=this._decodeJwt(e.access)?.exp;a&&(localStorage.setItem("auth_data",JSON.stringify({user:n.user,access:e.access,refresh:e.refresh})),this._setupAutoLogout(a))}_setupAutoLogout(e){clearTimeout(this._tokenExpirationTimer);let n=e*1e3-Date.now();this._tokenExpirationTimer=setTimeout(()=>this.logout(),Math.max(n,0))}_tryAutoLogin(){let e=this._getStoredAuth(),n=e?.access;if(!n||!e?.user)return;let a=this._decodeJwt(n)?.exp;!a||a*1e3<Date.now()||(this._currentUser.set(e.user),this._setupAutoLogout(a))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var zo=(()=>{class i{_document=s(Rt);_isSpinnerActiveCount=v(0);isSpinnerActive=c(()=>this._isSpinnerActiveCount()>0);show(){this._isSpinnerActiveCount.update(e=>++e),this._updateDOM()}hide(e=0){setTimeout(()=>{this._isSpinnerActiveCount.update(n=>n===0?0:--n),this._updateDOM()},e)}_updateDOM(){let e=this._document.getElementById("global-spinner"),n=this._document.getElementsByTagName("app-root")[0];!e||!n||(e.style.display=this.isSpinnerActive()?"flex":"none",n.style.zIndex=this.isSpinnerActive()?"-1":"0",n.style.position=this.isSpinnerActive()?"relative":"static")}static \u0275fac=function(n){return new(n||i)};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var he=0;function Tn(){return he}function z(i,t){return(...e)=>{try{return he=t,i(...e)}finally{he=0}}}function In(i){return!i}function zi(i){return i}function A(i){return Array.isArray(i)}function dt(i){return(typeof i=="object"||typeof i=="function")&&i!=null}var Y=Symbol(),Xt=Symbol(),wt=class{predicates;fns=[];constructor(t){this.predicates=t}push(t){this.fns.push(Vi(this.predicates,t))}mergeIn(t){let e=this.predicates?t.fns.map(n=>Vi(this.predicates,n)):t.fns;this.fns.push(...e)}},Kt=class extends wt{get defaultValue(){return!1}compute(t){return this.fns.some(e=>{let n=e(t);return n&&n!==Xt})}},mt=class i extends wt{ignore;static ignoreNull(t){return new i(t,e=>e===null)}constructor(t,e){super(t),this.ignore=e}get defaultValue(){return[]}compute(t){return this.fns.reduce((e,n)=>{let a=n(t);return a===void 0||a===Xt?e:A(a)?[...e,...this.ignore?a.filter(r=>!this.ignore(r)):a]:this.ignore&&this.ignore(a)?e:[...e,a]},[])}},ue=class extends mt{constructor(t){super(t,void 0)}},pe=class extends wt{key;get defaultValue(){return this.key.reducer.getInitial()}constructor(t,e){super(t),this.key=e}compute(t){if(this.fns.length===0)return this.key.reducer.getInitial();let e=this.key.reducer.getInitial();for(let n=0;n<this.fns.length;n++){let a=this.fns[n](t);a!==Xt&&(e=this.key.reducer.reduce(e,a))}return e}};function Vi(i,t){return i.length===0?t:e=>{for(let n of i){let a=e.stateOf(n.path),r=h(a.structure.pathKeys).length-n.depth;for(let o=0;o<r;o++)a=a.structure.parent;if(!n.fn(a.context))return Xt}return t(e)}}var ht=class{predicates;hidden;disabledReasons;readonly;syncErrors;syncTreeErrors;asyncErrors;metadata=new Map;constructor(t){this.predicates=t,this.hidden=new Kt(t),this.disabledReasons=new ue(t),this.readonly=new Kt(t),this.syncErrors=mt.ignoreNull(t),this.syncTreeErrors=mt.ignoreNull(t),this.asyncErrors=mt.ignoreNull(t)}hasMetadata(t){return this.metadata.has(t)}getMetadataKeys(){return this.metadata.keys()}getMetadata(t){return this.metadata.has(t)||this.metadata.set(t,new pe(this.predicates,t)),this.metadata.get(t)}mergeIn(t){this.hidden.mergeIn(t.hidden),this.disabledReasons.mergeIn(t.disabledReasons),this.readonly.mergeIn(t.readonly),this.syncErrors.mergeIn(t.syncErrors),this.syncTreeErrors.mergeIn(t.syncTreeErrors),this.asyncErrors.mergeIn(t.asyncErrors);for(let e of t.getMetadataKeys()){let n=t.metadata.get(e);this.getMetadata(e).mergeIn(n)}}},qt=class{depth;constructor(t){this.depth=t}build(){return new Qt(this,[],0)}},ut=class i extends qt{constructor(t){super(t)}current;all=[];addHiddenRule(t){this.getCurrent().addHiddenRule(t)}addDisabledReasonRule(t){this.getCurrent().addDisabledReasonRule(t)}addReadonlyRule(t){this.getCurrent().addReadonlyRule(t)}addSyncErrorRule(t){this.getCurrent().addSyncErrorRule(t)}addSyncTreeErrorRule(t){this.getCurrent().addSyncTreeErrorRule(t)}addAsyncErrorRule(t){this.getCurrent().addAsyncErrorRule(t)}addMetadataRule(t,e){this.getCurrent().addMetadataRule(t,e)}getChild(t){if(t===Y){let e=this.getCurrent().children;e.size>(e.has(Y)?1:0)&&(this.current=void 0)}return this.getCurrent().getChild(t)}hasLogic(t){return this===t?!0:this.all.some(({builder:e})=>e.hasLogic(t))}mergeIn(t,e){e?this.all.push({builder:t,predicate:{fn:z(e.fn,this.depth),path:e.path}}):this.all.push({builder:t}),this.current=void 0}getCurrent(){return this.current===void 0&&(this.current=new St(this.depth),this.all.push({builder:this.current})),this.current}static newRoot(){return new i(0)}},St=class extends qt{logic=new ht([]);children=new Map;constructor(t){super(t)}addHiddenRule(t){this.logic.hidden.push(z(t,this.depth))}addDisabledReasonRule(t){this.logic.disabledReasons.push(z(t,this.depth))}addReadonlyRule(t){this.logic.readonly.push(z(t,this.depth))}addSyncErrorRule(t){this.logic.syncErrors.push(z(t,this.depth))}addSyncTreeErrorRule(t){this.logic.syncTreeErrors.push(z(t,this.depth))}addAsyncErrorRule(t){this.logic.asyncErrors.push(z(t,this.depth))}addMetadataRule(t,e){this.logic.getMetadata(t).push(z(e,this.depth))}getChild(t){return this.children.has(t)||this.children.set(t,new ut(this.depth+1)),this.children.get(t)}hasLogic(t){return this===t}},Qt=class i{builder;predicates;depth;logic;constructor(t,e,n){this.builder=t,this.predicates=e,this.depth=n,this.logic=t?Rn(t,e,n):new ht([])}getChild(t){let e=this.builder?Ki(this.builder,t):[];if(e.length===0)return new i(void 0,[],this.depth+1);if(e.length===1){let{builder:n,predicates:a}=e[0];return new i(n,[...this.predicates,...a.map(r=>ge(r,this.depth))],this.depth+1)}else{let n=e.map(({builder:a,predicates:r})=>new i(a,[...this.predicates,...r.map(o=>ge(o,this.depth))],this.depth+1));return new fe(n)}}hasLogic(t){return this.builder?.hasLogic(t)??!1}},fe=class i{all;logic;constructor(t){this.all=t,this.logic=new ht([]);for(let e of t)this.logic.mergeIn(e.logic)}getChild(t){return new i(this.all.flatMap(e=>e.getChild(t)))}hasLogic(t){return this.all.some(e=>e.hasLogic(t))}};function Ki(i,t){if(i instanceof ut)return i.all.flatMap(({builder:e,predicate:n})=>{let a=Ki(e,t);return n?a.map(({builder:r,predicates:o})=>({builder:r,predicates:[...o,n]})):a});if(i instanceof St)return[...t!==Y&&i.children.has(Y)?[{builder:i.getChild(Y),predicates:[]}]:[],...i.children.has(t)?[{builder:i.getChild(t),predicates:[]}]:[]];throw new g(1909,!1)}function Rn(i,t,e){let n=new ht(t);if(i instanceof ut){let a=i.all.map(({builder:r,predicate:o})=>new Qt(r,o?[...t,ge(o,e)]:t,e));for(let r of a)n.mergeIn(r.logic)}else if(i instanceof St)n.mergeIn(i.logic);else throw new g(1909,!1);return n}function ge(i,t){return F(f({},i),{depth:t})}var qi=Symbol("PATH"),R=class i{keys;parent;keyInParent;root;children=new Map;fieldPathProxy=new Proxy(this,Nn);logicBuilder;constructor(t,e,n,a){this.keys=t,this.parent=n,this.keyInParent=a,this.root=e??this,n||(this.logicBuilder=ut.newRoot())}get builder(){return this.logicBuilder?this.logicBuilder:this.parent.builder.getChild(this.keyInParent)}getChild(t){return this.children.has(t)||this.children.set(t,new i([...this.keys,t],this.root,this,t)),this.children.get(t)}mergeIn(t,e){let n=t.compile();this.builder.mergeIn(n.builder,e)}static unwrapFieldPath(t){return t[qi]}static newRoot(){return new i([],void 0,void 0,void 0)}},Nn={get(i,t){return t===qi?i:i.getChild(t).fieldPathProxy}},Ht,xt=new Map,Gt=class i{schemaFn;constructor(t){this.schemaFn=t}compile(){if(xt.has(this))return xt.get(this);let t=R.newRoot();xt.set(this,t);let e=Ht;try{Ht=t,this.schemaFn(t.fieldPathProxy)}finally{Ht=e}return t}static create(t){return t instanceof i?t:new i(t)}static rootCompile(t){try{return xt.clear(),t===void 0?R.newRoot():t instanceof i?t.compile():new i(t).compile()}finally{xt.clear()}}};function On(i){return i instanceof Gt||typeof i=="function"}function Zt(i){if(Ht!==R.unwrapFieldPath(i).root)throw new g(1908,!1)}function Mt(i,t,e){return Zt(i),R.unwrapFieldPath(i).builder.addMetadataRule(t,e),t}var V={list(){return{reduce:(i,t)=>t===void 0?i:[...i,t],getInitial:()=>[]}},min(){return{reduce:(i,t)=>i===void 0||t===void 0?i??t:Math.min(i,t),getInitial:()=>{}}},max(){return{reduce:(i,t)=>i===void 0||t===void 0?i??t:Math.max(i,t),getInitial:()=>{}}},or(){return{reduce:(i,t)=>i||t,getInitial:()=>!1}},and(){return{reduce:(i,t)=>i&&t,getInitial:()=>!0}},override:Ln};function Ln(i){return{reduce:(t,e)=>e,getInitial:()=>i?.()}}var $t=class{reducer;create;brand;constructor(t,e){this.reducer=t,this.create=e}};function N(i){return new $t(i??V.override())}var Ee=N(V.or()),Qi=N(V.max()),Gi=N(V.min()),Ae=N(V.max()),$i=N(V.min()),Wi=N(V.list());function Fn(i){return i.errors().length>0?"invalid":i.pending()?"unknown":"valid"}var _e=class{node;constructor(t){this.node=t}rawSyncTreeErrors=c(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncTreeErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawSyncTreeErrors()??[]]);syncErrors=c(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncErrors.compute(this.node.context),...this.syncTreeErrors(),...Pn(this.node.submitState.submissionErrors())]);syncValid=c(()=>this.shouldSkipValidation()?!0:this.node.structure.reduceChildren(this.syncErrors().length===0,(t,e)=>e&&t.validationState.syncValid(),In));syncTreeErrors=c(()=>this.rawSyncTreeErrors().filter(t=>t.fieldTree===this.node.fieldTree));rawAsyncErrors=c(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.asyncErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawAsyncErrors()??[]]);asyncErrors=c(()=>this.shouldSkipValidation()?[]:this.rawAsyncErrors().filter(t=>t==="pending"||t.fieldTree===this.node.fieldTree));parseErrors=c(()=>this.node.formFieldBindings().flatMap(t=>t.parseErrors()));errors=c(()=>[...this.parseErrors(),...this.syncErrors(),...this.asyncErrors().filter(t=>t!=="pending")]);errorSummary=c(()=>{let t=this.node.structure.reduceChildren(this.errors(),(e,n)=>[...n,...e.errorSummary()]);return h(()=>t.sort(Bn)),t});pending=c(()=>this.node.structure.reduceChildren(this.asyncErrors().includes("pending"),(t,e)=>e||t.validationState.asyncErrors().includes("pending")));status=c(()=>{if(this.shouldSkipValidation())return"valid";let t=Fn(this);return this.node.structure.reduceChildren(t,(e,n)=>n==="invalid"||e.validationState.status()==="invalid"?"invalid":n==="unknown"||e.validationState.status()==="unknown"?"unknown":"valid",e=>e==="invalid")});valid=c(()=>this.status()==="valid");invalid=c(()=>this.status()==="invalid");shouldSkipValidation=c(()=>this.node.hidden()||this.node.disabled()||this.node.readonly())};function Pn(i){return i===void 0?[]:A(i)?i:[i]}function Te(i,t){if(A(i))for(let e of i)e.fieldTree??=t;else i&&(i.fieldTree??=t);return i}function Ui(i){return i.formField?i.formField.element:i.fieldTree().formFieldBindings().reduce((t,e)=>!t||!e.element?t??e.element:t.compareDocumentPosition(e.element)&Node.DOCUMENT_POSITION_PRECEDING?e.element:t,void 0)}function Bn(i,t){let e=Ui(i),n=Ui(t);return e===n?0:e===void 0||n===void 0?e===void 0?1:-1:e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}var be=N(),ve=class{node;cache=new WeakMap;constructor(t){this.node=t}resolve(t){if(!this.cache.has(t)){let e=c(()=>{let n=R.unwrapFieldPath(t),a=this.node,r=Tn();for(;r>0||!a.structure.logic.hasLogic(n.root.builder);)if(r--,a=a.structure.parent,a===void 0)throw new g(1900,!1);for(let o of n.keys)if(a=a.structure.getChild(o),a===void 0)throw new g(1901,!1);return a.fieldTree});this.cache.set(t,e)}return this.cache.get(t)()}get fieldTree(){return this.node.fieldProxy}get state(){return this.node}get value(){return this.node.structure.value}get key(){return this.node.structure.keyInParent}get pathKeys(){return this.node.structure.pathKeys}index=c(()=>{let t=this.key();if(!A(h(this.node.structure.parent.value)))throw new g(1906,!1);return Number(t)});fieldTreeOf=t=>this.resolve(t);stateOf=t=>this.resolve(t)();valueOf=t=>{let e=this.resolve(t)().value();if(e instanceof Mi)throw new g(1907,!1);return e}},ye=class{node;metadata=new Map;constructor(t){this.node=t;for(let e of this.node.logicNode.logic.getMetadataKeys())if(e.create){let n=this.node.logicNode.logic.getMetadata(e),a=h(()=>ee(this.node.structure.injector,()=>e.create(c(()=>n.compute(this.node.context)))));this.metadata.set(e,a)}}get(t){if(this.has(t)&&!this.metadata.has(t)){if(t.create)throw new g(1912,!1);let e=this.node.logicNode.logic.getMetadata(t);this.metadata.set(t,c(()=>e.compute(this.node.context)))}return this.metadata.get(t)}has(t){return this.node.logicNode.logic.hasMetadata(t)}},jn={get(i,t,e){let n=i(),a=n.structure.getChild(t);if(a!==void 0)return a.fieldTree;let r=h(n.value);if(A(r)){if(t==="length")return n.value().length;if(t===Symbol.iterator)return()=>(n.value(),Array.prototype[Symbol.iterator].apply(n.fieldTree))}if(dt(r)&&t===Symbol.iterator)return function*(){for(let o in e)yield[o,e[o]]}},getOwnPropertyDescriptor(i,t){let e=h(i().value),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&!n.configurable&&(n.configurable=!0),n},ownKeys(i){let t=h(i().value);return typeof t=="object"&&t!==null?Reflect.ownKeys(t):[]}};function zn(i,t){let e=c(()=>i()[t()]);return e[Jt]=i[Jt],e.set=n=>{i.update(a=>Vn(a,n,t()))},e.update=n=>{e.set(n(h(e)))},e.asReadonly=()=>e,e}function Vn(i,t,e){if(A(i)){let n=[...i];return n[e]=t,n}else return F(f({},i),{[e]:t})}var Wt=class{logic;node;createChildNode;identitySymbol=Symbol();_injector=void 0;get injector(){return this._injector??=k.create({providers:[],parent:this.fieldManager.injector}),this._injector}constructor(t,e,n){this.logic=t,this.node=e,this.createChildNode=n}children(){let t=this.childrenMap();return t===void 0?[]:Array.from(t.byPropertyKey.values()).map(e=>h(e.reader))}getChild(t){let e=t.toString(),n=h(this.childrenMap)?.byPropertyKey.get(e)?.reader;return n||(n=this.createReader(e)),n()}reduceChildren(t,e,n){let a=this.childrenMap();if(!a)return t;let r=t;for(let o of a.byPropertyKey.values()){if(n?.(r))break;r=e(h(o.reader),r)}return r}destroy(){this.injector.destroy()}createKeyInParent(t,e,n){if(t.kind==="root")return Xi;if(e===void 0){let a=n;return c(()=>{if(this.parent.structure.getChild(a)!==this.node)throw new g(1902,!1);return a})}else{let a=n;return c(()=>{let r=this.parent.structure.value();if(!A(r))throw new g(1903,!1);let o=r[a];if(dt(o)&&o.hasOwnProperty(this.parent.structure.identitySymbol)&&o[this.parent.structure.identitySymbol]===e)return a;for(let l=0;l<r.length;l++){let d=r[l];if(dt(d)&&d.hasOwnProperty(this.parent.structure.identitySymbol)&&d[this.parent.structure.identitySymbol]===e)return a=l.toString()}throw new g(1904,!1)})}}createChildrenMap(){return at({source:this.value,computation:(t,e)=>{if(!dt(t))return;let n=e?.value??{byPropertyKey:new Map},a,r=A(t);n!==void 0&&(r?a=Hn(n,t,this.identitySymbol):a=Kn(n,t));for(let o of Object.keys(t)){let l,d=t[o];if(d===void 0){n.byPropertyKey.has(o)&&(a??=f({},n),a.byPropertyKey.delete(o));continue}r&&dt(d)&&!A(d)&&(l=d[this.identitySymbol]??=Symbol(""));let x;l&&(n.byTrackingKey?.has(l)||(a??=f({},n),a.byTrackingKey??=new Map,a.byTrackingKey.set(l,this.createChildNode(o,l,r))),x=(a??n).byTrackingKey.get(l));let ft=n.byPropertyKey.get(o);ft===void 0?(a??=f({},n),a.byPropertyKey.set(o,{reader:this.createReader(o),node:x??this.createChildNode(o,l,r)})):x&&x!==ft.node&&(a??=f({},n),ft.node=x)}return a??n}})}createReader(t){return c(()=>this.childrenMap()?.byPropertyKey.get(t)?.node)}},ke=class extends Wt{fieldManager;value;get parent(){}get root(){return this.node}get pathKeys(){return Un}get keyInParent(){return Xi}childrenMap;constructor(t,e,n,a,r){super(e,t,r),this.fieldManager=n,this.value=a,this.childrenMap=this.createChildrenMap()}},xe=class extends Wt{logic;parent;root;pathKeys;keyInParent;value;childrenMap;get fieldManager(){return this.root.structure.fieldManager}constructor(t,e,n,a,r,o){super(e,t,o),this.logic=e,this.parent=n,this.root=this.parent.structure.root,this.keyInParent=this.createKeyInParent({kind:"child",parent:n,pathNode:void 0,logic:e,initialKeyInParent:r,identityInParent:a,fieldAdapter:void 0},a,r),this.pathKeys=c(()=>[...n.structure.pathKeys(),this.keyInParent()]),this.value=zn(this.parent.structure.value,this.keyInParent),this.childrenMap=this.createChildrenMap(),this.fieldManager.structures.add(this)}};var Un=c(()=>[]),Xi=c(()=>{throw new g(1905,!1)});function Hn(i,t,e){let n,a=new Set(i.byPropertyKey.keys()),r=new Set(i.byTrackingKey?.keys());for(let o=0;o<t.length;o++){let l=t[o];a.delete(o.toString()),dt(l)&&l.hasOwnProperty(e)&&r.delete(l[e])}if(a.size>0){n??=f({},i);for(let o of a)n.byPropertyKey.delete(o)}if(r.size>0){n??=f({},i);for(let o of r)n.byTrackingKey?.delete(o)}return n}function Kn(i,t){let e;for(let n of i.byPropertyKey.keys())t.hasOwnProperty(n)||(e??=f({},i),e.byPropertyKey.delete(n));return e}var we=class{node;selfSubmitting=v(!1);submissionErrors;constructor(t){this.node=t,this.submissionErrors=at({source:this.node.structure.value,computation:()=>[]})}submitting=c(()=>this.selfSubmitting()||(this.node.structure.parent?.submitting()??!1))},Ct=class{structure;validationState;metadataState;nodeState;submitState;fieldAdapter;controlValue;_context=void 0;get context(){return this._context??=new ve(this)}fieldProxy=new Proxy(()=>this,jn);pathNode;constructor(t){this.pathNode=t.pathNode,this.fieldAdapter=t.fieldAdapter,this.structure=this.fieldAdapter.createStructure(this,t),this.validationState=this.fieldAdapter.createValidationState(this,t),this.nodeState=this.fieldAdapter.createNodeState(this,t),this.metadataState=new ye(this),this.submitState=new we(this),this.controlValue=this.controlValueSignal()}focusBoundControl(t){this.getBindingForFocus()?.focus(t)}getBindingForFocus(){let t=this.formFieldBindings().filter(e=>e.focus!==void 0).reduce(Hi,void 0);return t||this.structure.children().map(e=>e.getBindingForFocus()).reduce(Hi,void 0)}pendingSync=at({source:()=>this.value(),computation:(t,e)=>{e?.value?.abort()}});get fieldTree(){return this.fieldProxy}get logicNode(){return this.structure.logic}get value(){return this.structure.value}get keyInParent(){return this.structure.keyInParent}get errors(){return this.validationState.errors}get parseErrors(){return this.validationState.parseErrors}get errorSummary(){return this.validationState.errorSummary}get pending(){return this.validationState.pending}get valid(){return this.validationState.valid}get invalid(){return this.validationState.invalid}get dirty(){return this.nodeState.dirty}get touched(){return this.nodeState.touched}get disabled(){return this.nodeState.disabled}get disabledReasons(){return this.nodeState.disabledReasons}get hidden(){return this.nodeState.hidden}get readonly(){return this.nodeState.readonly}get formFieldBindings(){return this.nodeState.formFieldBindings}get submitting(){return this.submitState.submitting}get name(){return this.nodeState.name}get max(){return this.metadata(Gi)}get maxLength(){return this.metadata($i)}get min(){return this.metadata(Qi)}get minLength(){return this.metadata(Ae)}get pattern(){return this.metadata(Wi)??qn}get required(){return this.metadata(Ee)??Qn}metadata(t){return this.metadataState.get(t)}hasMetadata(t){return this.metadataState.has(t)}markAsTouched(){h(()=>{this.nodeState.markAsTouched(),this.flushSync()})}markAsDirty(){this.nodeState.markAsDirty()}markAsPristine(){this.nodeState.markAsPristine()}markAsUntouched(){this.nodeState.markAsUntouched()}reset(t){h(()=>this._reset(t))}_reset(t){t!==void 0&&this.value.set(t),this.nodeState.markAsUntouched(),this.nodeState.markAsPristine();for(let e of this.structure.children())e._reset()}controlValueSignal(){let t=at(this.value),{set:e,update:n}=t;return t.set=a=>{e(a),this.markAsDirty(),this.debounceSync()},t.update=a=>{n(a),this.markAsDirty(),this.debounceSync()},t}sync(){this.value.set(this.controlValue())}flushSync(){let t=this.pendingSync();t&&!t.signal.aborted&&(t.abort(),this.sync())}async debounceSync(){let t=h(()=>(this.pendingSync()?.abort(),this.nodeState.debouncer()));if(t){let e=new AbortController,n=t(e.signal);if(n&&(this.pendingSync.set(e),await n,e.signal.aborted))return}this.sync()}static newRoot(t,e,n,a){return a.newRoot(t,e,n,a)}createStructure(t){return t.kind==="root"?new ke(this,t.logic,t.fieldManager,t.value,this.newChild.bind(this)):new xe(this,t.logic,t.parent,t.identityInParent,t.initialKeyInParent,this.newChild.bind(this))}newChild(t,e,n){let a,r;return n?(a=this.pathNode.getChild(Y),r=this.structure.logic.getChild(Y)):(a=this.pathNode.getChild(t),r=this.structure.logic.getChild(t)),this.fieldAdapter.newChild({kind:"child",parent:this,pathNode:a,logic:r,initialKeyInParent:t,identityInParent:e,fieldAdapter:this.fieldAdapter})}},qn=c(()=>[]),Qn=c(()=>!1);function Hi(i,t){return i?t&&i.element.compareDocumentPosition(t.element)&Node.DOCUMENT_POSITION_PRECEDING?t:i:t}var Se=class{node;selfTouched=v(!1);selfDirty=v(!1);markAsTouched(){this.selfTouched.set(!0)}markAsDirty(){this.selfDirty.set(!0)}markAsPristine(){this.selfDirty.set(!1)}markAsUntouched(){this.selfTouched.set(!1)}formFieldBindings=v([]);constructor(t){this.node=t}dirty=c(()=>{let t=this.selfDirty()&&!this.isNonInteractive();return this.node.structure.reduceChildren(t,(e,n)=>n||e.nodeState.dirty(),zi)});touched=c(()=>{let t=this.selfTouched()&&!this.isNonInteractive();return this.node.structure.reduceChildren(t,(e,n)=>n||e.nodeState.touched(),zi)});disabledReasons=c(()=>[...this.node.structure.parent?.nodeState.disabledReasons()??[],...this.node.logicNode.logic.disabledReasons.compute(this.node.context)]);disabled=c(()=>!!this.disabledReasons().length);readonly=c(()=>(this.node.structure.parent?.nodeState.readonly()||this.node.logicNode.logic.readonly.compute(this.node.context))??!1);hidden=c(()=>(this.node.structure.parent?.nodeState.hidden()||this.node.logicNode.logic.hidden.compute(this.node.context))??!1);name=c(()=>{let t=this.node.structure.parent;return t?`${t.name()}.${this.node.structure.keyInParent()}`:this.node.structure.fieldManager.rootName});debouncer=c(()=>{if(this.node.logicNode.logic.hasMetadata(be)){let e=this.node.logicNode.logic.getMetadata(be).compute(this.node.context);if(e)return n=>e(this.node.context,n)}return this.node.structure.parent?.nodeState.debouncer?.()});isNonInteractive=c(()=>this.hidden()||this.disabled()||this.readonly())},Ce=class{newRoot(t,e,n,a){return new Ct({kind:"root",fieldManager:t,value:e,pathNode:n,logic:n.builder.build(),fieldAdapter:a})}newChild(t){return new Ct(t)}createNodeState(t){return new Se(t)}createValidationState(t){return new _e(t)}createStructure(t,e){return t.createStructure(e)}},Me=class{injector;rootName;submitOptions;constructor(t,e,n){this.injector=t,this.rootName=e??`${this.injector.get(Qe)}.form${Gn++}`,this.submitOptions=n}structures=new Set;createFieldManagementEffect(t){it(()=>{let e=new Set;this.markStructuresLive(t,e);for(let n of this.structures)e.has(n)||(this.structures.delete(n),h(()=>n.destroy()))},{injector:this.injector})}markStructuresLive(t,e){e.add(t);for(let n of t.children())this.markStructuresLive(n.structure,e)}},Gn=0;function $n(i){let t,e,n;return i.length===3?[t,e,n]=i:i.length===2?On(i[1])?[t,e]=i:[t,n]=i:[t]=i,[t,e,n]}function Wn(...i){let[t,e,n]=$n(i),a=n?.injector??s(k),r=ee(a,()=>Gt.rootCompile(e)),o=new Me(a,n?.name,n?.submission),l=n?.adapter??new Ce,d=Ct.newRoot(o,t,r,l);return o.createFieldManagementEffect(d.structure),d.fieldTree}async function Xn(i,t){let e=h(i),n=t===void 0?e.structure.root.fieldProxy:i,a={root:e.structure.root.fieldProxy,submitted:i};t=typeof t=="function"?{action:t}:t??e.structure.fieldManager.submitOptions;let r=t?.action;if(!r)throw new g(1915,!1);let o=t?.onInvalid,l=t?.ignoreValidators??"pending",d=!0;h(()=>{Zi(e),l==="none"?d=e.valid():l==="pending"&&(d=!e.invalid())});try{if(d){e.submitState.selfSubmitting.set(!0);let x=await h(()=>r?.(n,a));return x&&Zn(e,x),!x||A(x)&&x.length===0}else h(()=>o?.(n,a));return!1}finally{e.submitState.selfSubmitting.set(!1)}}function Zi(i){if(!i.validationState.shouldSkipValidation()){i.markAsTouched();for(let t of i.structure.children())Zi(t)}}function Zn(i,t){A(t)||(t=[t]);let e=new Map;for(let n of t){let a=Te(n,i.fieldTree),r=a.fieldTree(),o=e.get(r);o||(o=[],e.set(r,o)),o.push(a)}for(let[n,a]of e)n.submitState.submissionErrors.set(a)}var De=class{kind="compat";control;fieldTree;context;message;constructor({context:t,kind:e,control:n}){this.context=t,this.kind=e,this.control=n}};function Yi(i){if(i.length===0)return null;let t={};for(let e of i)t[e.kind]=e instanceof De?e.context:e;return t}var Yn=new I("");function os(i,t){Zt(i),R.unwrapFieldPath(i).builder.addHiddenRule(t)}function Jn(i){let t=i;return typeof t.length=="number"?t.length:t.size}function pt(i,t){return i instanceof Function?i(t):i}function Fe(i){return typeof i=="number"?isNaN(i):i===""||i===!1||i==null}function Pe(i,t){Zt(i),R.unwrapFieldPath(i).builder.addSyncErrorRule(n=>Te(t(n),n.fieldTree))}function ta(i){return new Ie(i)}function ea(i,t){return new Re(i,t)}function ia(i){return new Ne(i)}var Dt=class{__brand=void 0;kind="";fieldTree;message;constructor(t){t&&Object.assign(this,t)}},Ie=class extends Dt{kind="required"};var Re=class extends Dt{minLength;kind="minLength";constructor(t,e){super(e),this.minLength=t}};var Ne=class extends Dt{kind="email"};var na=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function ss(i,t){Pe(i,e=>{if(!Fe(e.value())&&!na.test(e.value()))return t?.error?pt(t.error,e):ia({message:pt(t?.message,e)})})}function cs(i,t,e){let n=Mt(i,N(),a=>typeof t=="number"?t:t(a));Mt(i,Ae,({state:a})=>a.metadata(n)()),Pe(i,a=>{if(Fe(a.value()))return;let r=a.state.metadata(n)();if(r!==void 0&&Jn(a.value())<r)return e?.error?pt(e.error,a):ea(r,{message:pt(e?.message,a)})})}function ls(i,t){let e=Mt(i,N(),n=>t?.when?t.when(n):!0);Mt(i,Ee,({state:n})=>n.metadata(e)()),Pe(i,n=>{if(n.state.metadata(e)()&&Fe(n.value()))return t?.error?pt(t.error,n):ta({message:pt(t?.message,n)})})}var aa=new I("");var Oe=class{field;constructor(t){this.field=t}control=this;get value(){return this.field().value()}get valid(){return this.field().valid()}get invalid(){return this.field().invalid()}get pending(){return this.field().pending()}get disabled(){return this.field().disabled()}get enabled(){return!this.field().disabled()}get errors(){return Yi(this.field().errors())}get pristine(){return!this.field().dirty()}get dirty(){return this.field().dirty()}get touched(){return this.field().touched()}get untouched(){return!this.field().touched()}get status(){if(this.field().disabled())return"DISABLED";if(this.field().valid())return"VALID";if(this.field().invalid())return"INVALID";if(this.field().pending())return"PENDING";throw new g(1910,!1)}valueAccessor=null;hasValidator(t){return t===Si.required?this.field().required():!1}updateValueAndValidity(){}},Le={disabled:"disabled",disabledReasons:"disabledReasons",dirty:"dirty",errors:"errors",hidden:"hidden",invalid:"invalid",max:"max",maxLength:"maxLength",min:"min",minLength:"minLength",name:"name",pattern:"pattern",pending:"pending",readonly:"readonly",required:"required",touched:"touched"},ra=(()=>{let i={};for(let t of Object.keys(Le))i[Le[t]]=t;return i})();function Be(i,t){let e=ra[t];return i[e]?.()}var je=Object.values(Le);function Yt(){return{}}function J(i,t,e){return i[t]!==e?(i[t]=e,!0):!1}function oa(i){return i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"}function sa(i){if(i.tagName!=="INPUT")return!1;let t=i.type;return t==="date"||t==="datetime-local"||t==="month"||t==="number"||t==="range"||t==="time"||t==="week"}function ca(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function la(i,t){switch(i.type){case"checkbox":return i.checked;case"number":case"range":case"datetime-local":if(typeof h(t)=="number")return i.valueAsNumber;break;case"date":case"month":case"time":case"week":let e=h(t);if(e===null||e instanceof Date)return i.valueAsDate;if(typeof e=="number")return i.valueAsNumber;break}return i.value}function da(i,t){switch(i.type){case"checkbox":i.checked=t;return;case"radio":i.checked=t===i.value;return;case"number":case"range":case"datetime-local":if(typeof t=="number"){Ji(i,t);return}break;case"date":case"month":case"time":case"week":if(t===null||t instanceof Date){i.valueAsDate=t;return}else if(typeof t=="number"){Ji(i,t);return}}i.value=t}function Ji(i,t){isNaN(t)?i.value="":i.valueAsNumber=t}function ze(i,t,e,n){switch(e){case"name":i.setAttribute(t,e,n);break;case"disabled":case"readonly":case"required":n?i.setAttribute(t,e,""):i.removeAttribute(t,e);break;case"max":case"min":case"minLength":case"maxLength":n!==void 0?i.setAttribute(t,e,n.toString()):i.removeAttribute(t,e);break}}function ma(i,t){i.listenToCustomControlModel(n=>t.state().controlValue.set(n)),i.listenToCustomControlOutput("touchedChange",()=>t.state().markAsTouched()),t.registerAsBinding(i.customControl);let e=Yt();return()=>{let n=t.state(),a=n.controlValue();J(e,"controlValue",a)&&i.setCustomControlModelInput(a);for(let r of je){let o;r==="errors"?o=t.errors():o=Be(n,r),J(e,r,o)&&(i.setInputOnDirectives(r,o),t.elementAcceptsNativeProperty(r)&&!i.customControlHasInput(r)&&ze(t.renderer,t.nativeFormElement,r,o))}}}function ha(i,t){t.controlValueAccessor.registerOnChange(n=>t.state().controlValue.set(n)),t.controlValueAccessor.registerOnTouched(()=>t.state().markAsTouched()),t.registerAsBinding();let e=Yt();return()=>{let n=t.state(),a=n.value();J(e,"controlValue",a)&&h(()=>t.controlValueAccessor.writeValue(a));for(let r of je){let o=Be(n,r);if(J(e,r,o)){let l=i.setInputOnDirectives(r,o);r==="disabled"&&t.controlValueAccessor.setDisabledState?h(()=>t.controlValueAccessor.setDisabledState(o)):!l&&t.elementAcceptsNativeProperty(r)&&ze(t.renderer,t.nativeFormElement,r,o)}}}}function ua(i,t,e){if(typeof MutationObserver!="function")return;let n=new MutationObserver(a=>{a.some(r=>pa(r))&&t()});n.observe(i,{attributes:!0,attributeFilter:["value"],characterData:!0,childList:!0,subtree:!0}),e.onDestroy(()=>n.disconnect())}function pa(i){if(i.type==="childList"||i.type==="characterData"){if(i.target instanceof Comment)return!1;for(let t of i.addedNodes)if(!(t instanceof Comment))return!0;for(let t of i.removedNodes)if(!(t instanceof Comment))return!0;return!1}return i.type==="attributes"&&i.target instanceof HTMLOptionElement}function fa(i,t){let e=!1,n=t.nativeFormElement;i.listenToDom("input",()=>{let r=t.state();r.controlValue.set(la(n,r.value))}),i.listenToDom("blur",()=>t.state().markAsTouched()),t.registerAsBinding(),n.tagName==="SELECT"&&ua(n,()=>{e&&(n.value=t.state().controlValue())},t.destroyRef);let a=Yt();return()=>{let r=t.state(),o=r.controlValue();J(a,"controlValue",o)&&da(n,o);for(let l of je){let d=Be(r,l);J(a,l,d)&&(i.setInputOnDirectives(l,d),t.elementAcceptsNativeProperty(l)&&ze(t.renderer,n,l,d))}e=!0}}var ga=Symbol(),_a=new I(""),ds=(()=>{class i{fieldTree=Je.required({alias:"formField"});renderer=s($e);destroyRef=s(H);state=c(()=>this.fieldTree()());injector=s(k);element=s(Nt).nativeElement;elementIsNativeFormElement=oa(this.element);elementAcceptsNumericValues=sa(this.element);elementAcceptsTextualValues=ca(this.element);nativeFormElement=this.elementIsNativeFormElement?this.element:void 0;focuser=e=>this.element.focus(e);controlValueAccessors=s(wi,{optional:!0,self:!0});config=s(Yn,{optional:!0});parseErrorsSource=v(void 0);_interopNgControl;get interopNgControl(){return this._interopNgControl??=new Oe(this.state)}parseErrors=c(()=>this.parseErrorsSource()?.().map(e=>F(f({},e),{fieldTree:h(this.fieldTree),formField:this}))??[]);errors=c(()=>this.state().errors().filter(e=>!e.formField||e.formField===this));isFieldBinding=!1;get controlValueAccessor(){return this.controlValueAccessors?.[0]??this.interopNgControl?.valueAccessor??void 0}installClassBindingEffect(){let e=Object.entries(this.config?.classes??{}).map(([a,r])=>[a,c(()=>r(this))]);if(e.length===0)return;let n=Yt();ei({write:()=>{for(let[a,r]of e){let o=r();J(n,a,o)&&(o?this.renderer.addClass(this.element,a):this.renderer.removeClass(this.element,a))}}},{injector:this.injector})}focus(e){this.focuser(e)}registerAsBinding(e){if(this.isFieldBinding)throw new g(1913,!1);this.isFieldBinding=!0,this.installClassBindingEffect(),e?.focus&&(this.focuser=e.focus),it(n=>{let a=this.state();a.nodeState.formFieldBindings.update(r=>[...r,this]),n(()=>{a.nodeState.formFieldBindings.update(r=>r.filter(o=>o!==this))})},{injector:this.injector})}[ga];\u0275ngControlCreate(e){if(!e.hasPassThrough)if(this.controlValueAccessor)this.\u0275ngControlUpdate=ha(e,this);else if(e.customControl)this.\u0275ngControlUpdate=ma(e,this);else if(this.elementIsNativeFormElement)this.\u0275ngControlUpdate=fa(e,this);else throw new g(1914,!1)}\u0275ngControlUpdate;elementAcceptsNativeProperty(e){if(!this.elementIsNativeFormElement)return!1;switch(e){case"min":case"max":return this.elementAcceptsNumericValues;case"minLength":case"maxLength":return this.elementAcceptsTextualValues;case"disabled":case"required":case"readonly":case"name":return!0;default:return!1}}static \u0275fac=function(n){return new(n||i)};static \u0275dir=K({type:i,selectors:[["","formField",""]],inputs:{fieldTree:[1,"formField","fieldTree"]},exportAs:["formField"],features:[re([{provide:_a,useExisting:i},{provide:Ci,useFactory:()=>s(i).interopNgControl},{provide:aa,useFactory:()=>s(i).parseErrorsSource}]),We("formField")]})}return i})();var ps={required:"To pole jest wymagane",email:"Nieprawid\u0142owy format"};export{Z as a,ce as b,st as c,rn as d,fn as e,Oi as f,Cr as g,Mr as h,me as i,Pr as j,Fi as k,Pi as l,Ut as m,ji as n,lt as o,Lo as p,zo as q,Wn as r,Xn as s,os as t,Pe as u,ss as v,cs as w,ls as x,ds as y,ps as z};
//# sourceMappingURL=chunk-JI63SEXG.js.map
