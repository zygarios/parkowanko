import{B as nt,k as tt}from"./chunk-CH4K6TQ3.js";import{Bb as qe,Cb as G,Db as Xe,Ea as Le,Eb as Ye,Ja as W,Jb as Ze,Ka as Fe,La as Ve,Pa as Be,Pc as rt,Rb as Qe,Sc as it,Tb as o,U as Oe,Ub as O,V as xe,X as D,Xb as Je,Z as c,Za as E,_a as We,a as ie,aa as se,ab as ze,bc as $,da as ae,ea as je,fa as I,gc as et,hb as z,ib as _,id as st,jb as M,jd as at,kb as T,ld as ot,nb as H,nd as dt,oa as v,pa as S,qa as u,sb as He,ta as B,va as Ke,wb as Ge,xa as b,xb as $e,yb as Ue}from"./chunk-3PN6ZHUH.js";import{a as m,b as ne}from"./chunk-VZBGOO6O.js";var Mt=["determinateSpinner"];function Nt(r,e){if(r&1&&(ae(),_(0,"svg",11),T(1,"circle",12),M()),r&2){let t=He();E("viewBox",t._viewBox()),b(),G("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),E("r",t._circleRadius())}}var Rt=new D("mat-progress-spinner-default-options",{providedIn:"root",factory:()=>({diameter:ct})}),ct=100,kt=10,ut=(()=>{class r{_elementRef=c(B);_noopAnimations;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";_determinateCircle;constructor(){let t=c(Rt),n=it(),i=this._elementRef.nativeElement;this._noopAnimations=n==="di-disabled"&&!!t&&!t._forceAnimations,this.mode=i.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&n==="reduced-motion"&&i.classList.add("mat-progress-spinner-reduced-motion"),t&&(t.color&&(this.color=this._defaultColor=t.color),t.diameter&&(this.diameter=t.diameter),t.strokeWidth&&(this.strokeWidth=t.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}_value=0;get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}_diameter=ct;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_strokeWidth;_circleRadius(){return(this.diameter-kt)/2}_viewBox(){let t=this._circleRadius()*2+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=W({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,i){if(n&1&&Ge(Mt,5),n&2){let s;$e(s=Ue())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,i){n&2&&(E("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",i.mode==="determinate"?i.value:null)("mode",i.mode),Ye("mat-"+i.color),G("width",i.diameter,"px")("height",i.diameter,"px")("--mat-progress-spinner-size",i.diameter+"px")("--mat-progress-spinner-active-indicator-width",i.diameter+"px"),Xe("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate",i.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",$],diameter:[2,"diameter","diameter",$],strokeWidth:[2,"strokeWidth","strokeWidth",$]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,i){if(n&1&&(Be(0,Nt,2,8,"ng-template",null,0,Qe),_(2,"div",2,1),ae(),_(4,"svg",3),T(5,"circle",4),M()(),je(),_(6,"div",5)(7,"div",6)(8,"div",7),H(9,8),M(),_(10,"div",9),H(11,8),M(),_(12,"div",10),H(13,8),M()()()),n&2){let s=qe(1);b(4),E("viewBox",i._viewBox()),b(),G("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),E("r",i._circleRadius()),b(4),z("ngTemplateOutlet",s),b(2),z("ngTemplateOutlet",s),b(2),z("ngTemplateOutlet",s)}},dependencies:[et],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return r})();var lt=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=Fe({type:r});static \u0275inj=xe({imports:[rt]})}return r})();var ht=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275cmp=W({type:r,selectors:[["app-global-spinner"]],decls:1,vars:0,template:function(n,i){n&1&&T(0,"mat-spinner")},dependencies:[lt,ut],styles:[`[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:color-mix(in srgb,var(--par-color-primary) 10%,transparent)}
/*# sourceMappingURL=global-spinner.component-7H7BWMBC.css.map */`],changeDetection:0})}return r})();var Mr=(()=>{class r{_overlay=c(nt);_overlayRef=this._overlay.create({hasBackdrop:!1,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:this._overlay.scrollStrategies.block(),width:"100%",height:"100%"});_spinnerPortal=new tt(ht);isSpinnerActive=v(!1);constructor(){this.listenForSpinnerStateChange()}listenForSpinnerStateChange(){S(()=>{this.isSpinnerActive()?this.showSpinner():this.hideSpinner()})}showSpinner(){this._overlayRef.hasAttached()||this._overlayRef.attach(this._spinnerPortal)}hideSpinner(){this._overlayRef.hasAttached()&&this._overlayRef.detach()}static \u0275fac=function(n){return new(n||r)};static \u0275prov=Oe({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ce=0;function Ct(){return ce}function g(r,e){return(...t)=>{try{return ce=e,r(...t)}finally{ce=0}}}function At(r){return!r}function mt(r){return r}function l(r){return Array.isArray(r)}function N(r){return(typeof r=="object"||typeof r=="function")&&r!=null}var w=Symbol(),ee=Symbol(),j=class{predicates;fns=[];constructor(e){this.predicates=e}push(e){this.fns.push(ft(this.predicates,e))}mergeIn(e){let t=this.predicates?e.fns.map(n=>ft(this.predicates,n)):e.fns;this.fns.push(...t)}},q=class extends j{get defaultValue(){return!1}compute(e){return this.fns.some(t=>{let n=t(e);return n&&n!==ee})}},R=class r extends j{ignore;static ignoreNull(e){return new r(e,t=>t===null)}constructor(e,t){super(e),this.ignore=t}get defaultValue(){return[]}compute(e){return this.fns.reduce((t,n)=>{let i=n(e);return i===void 0||i===ee?t:l(i)?[...t,...this.ignore?i.filter(s=>!this.ignore(s)):i]:this.ignore&&this.ignore(i)?t:[...t,i]},[])}},ue=class extends R{constructor(e){super(e,void 0)}},le=class extends j{key;get defaultValue(){return this.key.reducer.getInitial()}constructor(e,t){super(e),this.key=t}compute(e){if(this.fns.length===0)return this.key.reducer.getInitial();let t=this.key.reducer.getInitial();for(let n=0;n<this.fns.length;n++){let i=this.fns[n](e);i!==ee&&(t=this.key.reducer.reduce(t,i))}return t}};function ft(r,e){return r.length===0?e:t=>{for(let n of r){let i=t.stateOf(n.path),s=u(i.structure.pathKeys).length-n.depth;for(let a=0;a<s;a++)i=i.structure.parent;if(!n.fn(i.context))return ee}return e(t)}}var k=class{predicates;hidden;disabledReasons;readonly;syncErrors;syncTreeErrors;asyncErrors;metadata=new Map;constructor(e){this.predicates=e,this.hidden=new q(e),this.disabledReasons=new ue(e),this.readonly=new q(e),this.syncErrors=R.ignoreNull(e),this.syncTreeErrors=R.ignoreNull(e),this.asyncErrors=R.ignoreNull(e)}hasMetadata(e){return this.metadata.has(e)}getMetadataKeys(){return this.metadata.keys()}getMetadata(e){return this.metadata.has(e)||this.metadata.set(e,new le(this.predicates,e)),this.metadata.get(e)}mergeIn(e){this.hidden.mergeIn(e.hidden),this.disabledReasons.mergeIn(e.disabledReasons),this.readonly.mergeIn(e.readonly),this.syncErrors.mergeIn(e.syncErrors),this.syncTreeErrors.mergeIn(e.syncTreeErrors),this.asyncErrors.mergeIn(e.asyncErrors);for(let t of e.getMetadataKeys()){let n=e.metadata.get(t);this.getMetadata(t).mergeIn(n)}}},X=class{depth;constructor(e){this.depth=e}build(){return new Y(this,[],0)}},P=class r extends X{constructor(e){super(e)}current;all=[];addHiddenRule(e){this.getCurrent().addHiddenRule(e)}addDisabledReasonRule(e){this.getCurrent().addDisabledReasonRule(e)}addReadonlyRule(e){this.getCurrent().addReadonlyRule(e)}addSyncErrorRule(e){this.getCurrent().addSyncErrorRule(e)}addSyncTreeErrorRule(e){this.getCurrent().addSyncTreeErrorRule(e)}addAsyncErrorRule(e){this.getCurrent().addAsyncErrorRule(e)}addMetadataRule(e,t){this.getCurrent().addMetadataRule(e,t)}getChild(e){if(e===w){let t=this.getCurrent().children;t.size>(t.has(w)?1:0)&&(this.current=void 0)}return this.getCurrent().getChild(e)}hasLogic(e){return this===e?!0:this.all.some(({builder:t})=>t.hasLogic(e))}mergeIn(e,t){t?this.all.push({builder:e,predicate:{fn:g(t.fn,this.depth),path:t.path}}):this.all.push({builder:e}),this.current=void 0}getCurrent(){return this.current===void 0&&(this.current=new K(this.depth),this.all.push({builder:this.current})),this.current}static newRoot(){return new r(0)}},K=class extends X{logic=new k([]);children=new Map;constructor(e){super(e)}addHiddenRule(e){this.logic.hidden.push(g(e,this.depth))}addDisabledReasonRule(e){this.logic.disabledReasons.push(g(e,this.depth))}addReadonlyRule(e){this.logic.readonly.push(g(e,this.depth))}addSyncErrorRule(e){this.logic.syncErrors.push(g(e,this.depth))}addSyncTreeErrorRule(e){this.logic.syncTreeErrors.push(g(e,this.depth))}addAsyncErrorRule(e){this.logic.asyncErrors.push(g(e,this.depth))}addMetadataRule(e,t){this.logic.getMetadata(e).push(g(t,this.depth))}getChild(e){return this.children.has(e)||this.children.set(e,new P(this.depth+1)),this.children.get(e)}hasLogic(e){return this===e}},Y=class r{builder;predicates;depth;logic;constructor(e,t,n){this.builder=e,this.predicates=t,this.depth=n,this.logic=e?Dt(e,t,n):new k([])}getChild(e){let t=this.builder?pt(this.builder,e):[];if(t.length===0)return new r(void 0,[],this.depth+1);if(t.length===1){let{builder:n,predicates:i}=t[0];return new r(n,[...this.predicates,...i.map(s=>me(s,this.depth))],this.depth+1)}else{let n=t.map(({builder:i,predicates:s})=>new r(i,[...this.predicates,...s.map(a=>me(a,this.depth))],this.depth+1));return new he(n)}}hasLogic(e){return this.builder?.hasLogic(e)??!1}},he=class r{all;logic;constructor(e){this.all=e,this.logic=new k([]);for(let t of e)this.logic.mergeIn(t.logic)}getChild(e){return new r(this.all.flatMap(t=>t.getChild(e)))}hasLogic(e){return this.all.some(t=>t.hasLogic(e))}};function pt(r,e){if(r instanceof P)return r.all.flatMap(({builder:t,predicate:n})=>{let i=pt(t,e);return n?i.map(({builder:s,predicates:a})=>({builder:s,predicates:[...a,n]})):i});if(r instanceof K)return[...e!==w&&r.children.has(w)?[{builder:r.getChild(w),predicates:[]}]:[],...r.children.has(e)?[{builder:r.getChild(e),predicates:[]}]:[]];throw new Error("Unknown LogicNodeBuilder type")}function Dt(r,e,t){let n=new k(e);if(r instanceof P){let i=r.all.map(({builder:s,predicate:a})=>new Y(s,a?[...e,me(a,t)]:e,t));for(let s of i)n.mergeIn(s.logic)}else if(r instanceof K)n.mergeIn(r.logic);else throw new Error("Unknown LogicNodeBuilder type");return n}function me(r,e){return ne(m({},r),{depth:e})}var gt=Symbol("PATH"),f=class r{keys;parent;keyInParent;root;children=new Map;fieldPathProxy=new Proxy(this,It);logicBuilder;constructor(e,t,n,i){this.keys=e,this.parent=n,this.keyInParent=i,this.root=t??this,n||(this.logicBuilder=P.newRoot())}get builder(){return this.logicBuilder?this.logicBuilder:this.parent.builder.getChild(this.keyInParent)}getChild(e){return this.children.has(e)||this.children.set(e,new r([...this.keys,e],this.root,this,e)),this.children.get(e)}mergeIn(e,t){let n=e.compile();this.builder.mergeIn(n.builder,t)}static unwrapFieldPath(e){return e[gt]}static newRoot(){return new r([],void 0,void 0,void 0)}},It={get(r,e){return e===gt?r:r.getChild(e).fieldPathProxy}},U,x=new Map,Z=class r{schemaFn;constructor(e){this.schemaFn=e}compile(){if(x.has(this))return x.get(this);let e=f.newRoot();x.set(this,e);let t=U;try{U=e,this.schemaFn(e.fieldPathProxy)}finally{U=t}return e}static create(e){return e instanceof r?e:new r(e)}static rootCompile(e){try{return x.clear(),e===void 0?f.newRoot():e instanceof r?e.compile():new r(e).compile()}finally{x.clear()}}};function Tt(r){return r instanceof Z||typeof r=="function"}function te(r){if(U!==f.unwrapFieldPath(r).root)throw new Error("A FieldPath can only be used directly within the Schema that owns it, **not** outside of it or within a sub-schema.")}function F(r,e,t){return te(r),f.unwrapFieldPath(r).builder.addMetadataRule(e,t),e}var y={list(){return{reduce:(r,e)=>e===void 0?r:[...r,e],getInitial:()=>[]}},min(){return{reduce:(r,e)=>r===void 0||e===void 0?r??e:Math.min(r,e),getInitial:()=>{}}},max(){return{reduce:(r,e)=>r===void 0||e===void 0?r??e:Math.max(r,e),getInitial:()=>{}}},or(){return{reduce:(r,e)=>r||e,getInitial:()=>!1}},and(){return{reduce:(r,e)=>r&&e,getInitial:()=>!0}},override:Ot};function Ot(r){return{reduce:(e,t)=>t,getInitial:()=>r?.()}}var Q=class{reducer;create;brand;constructor(e,t){this.reducer=e,this.create=t}};function p(r){return new Q(r??y.override())}var Me=p(y.or()),yt=p(y.max()),vt=p(y.min()),Ne=p(y.max()),bt=p(y.min()),_t=p(y.list());function xt(r){return r.errors().length>0?"invalid":r.pending()?"unknown":"valid"}var fe=class{node;constructor(e){this.node=e}rawSyncTreeErrors=o(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncTreeErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawSyncTreeErrors()??[]]);syncErrors=o(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncErrors.compute(this.node.context),...this.syncTreeErrors(),...jt(this.node.submitState.serverErrors())]);syncValid=o(()=>this.shouldSkipValidation()?!0:this.node.structure.reduceChildren(this.syncErrors().length===0,(e,t)=>t&&e.validationState.syncValid(),At));syncTreeErrors=o(()=>this.rawSyncTreeErrors().filter(e=>e.field===this.node.fieldProxy));rawAsyncErrors=o(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.asyncErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawAsyncErrors()??[]]);asyncErrors=o(()=>this.shouldSkipValidation()?[]:this.rawAsyncErrors().filter(e=>e==="pending"||e.field===this.node.fieldProxy));errors=o(()=>[...this.syncErrors(),...this.asyncErrors().filter(e=>e!=="pending")]);errorSummary=o(()=>this.node.structure.reduceChildren(this.errors(),(e,t)=>[...t,...e.errorSummary()]));pending=o(()=>this.node.structure.reduceChildren(this.asyncErrors().includes("pending"),(e,t)=>t||e.validationState.asyncErrors().includes("pending")));status=o(()=>{if(this.shouldSkipValidation())return"valid";let e=xt(this);return this.node.structure.reduceChildren(e,(t,n)=>n==="invalid"||t.validationState.status()==="invalid"?"invalid":n==="unknown"||t.validationState.status()==="unknown"?"unknown":"valid",t=>t==="invalid")});valid=o(()=>this.status()==="valid");invalid=o(()=>this.status()==="invalid");shouldSkipValidation=o(()=>this.node.hidden()||this.node.disabled()||this.node.readonly())};function jt(r){return r===void 0?[]:l(r)?r:[r]}function Re(r,e){if(l(r))for(let t of r)t.field??=e;else r&&(r.field??=e);return r}var pe=p(),ge=class{node;cache=new WeakMap;constructor(e){this.node=e}resolve(e){if(!this.cache.has(e)){let t=o(()=>{let n=f.unwrapFieldPath(e),i=this.node,s=Ct();for(;s>0||!i.structure.logic.hasLogic(n.root.builder);)if(s--,i=i.structure.parent,i===void 0)throw new Error("Path is not part of this field tree.");for(let a of n.keys)if(i=i.structure.getChild(a),i===void 0)throw new Error(`Cannot resolve path .${n.keys.join(".")} relative to field ${["<root>",...this.node.structure.pathKeys()].join(".")}.`);return i.fieldProxy});this.cache.set(e,t)}return this.cache.get(e)()}get field(){return this.node.fieldProxy}get state(){return this.node}get value(){return this.node.structure.value}get key(){return this.node.structure.keyInParent}get pathKeys(){return this.node.structure.pathKeys}index=o(()=>{let e=this.key();if(!l(u(this.node.structure.parent.value)))throw new Error("RuntimeError: cannot access index, parent field is not an array");return Number(e)});fieldTreeOf=e=>this.resolve(e);stateOf=e=>this.resolve(e)();valueOf=e=>{let t=this.resolve(e)().value();if(t instanceof dt)throw new Error("Tried to read an 'AbstractControl' value form a 'form()'. Did you mean to use 'compatForm()' instead?");return t}},ye=class{node;metadata=new Map;constructor(e){this.node=e;for(let t of this.node.logicNode.logic.getMetadataKeys())if(t.create){let n=this.node.logicNode.logic.getMetadata(t),i=u(()=>se(this.node.structure.injector,()=>t.create(o(()=>n.compute(this.node.context)))));this.metadata.set(t,i)}}get(e){if(this.has(e)&&!this.metadata.has(e)){if(e.create)throw Error("Managed metadata cannot be created lazily");let t=this.node.logicNode.logic.getMetadata(e);this.metadata.set(e,o(()=>t.compute(this.node.context)))}return this.metadata.get(e)}has(e){return this.node.logicNode.logic.hasMetadata(e)}},Kt={get(r,e,t){let n=r(),i=n.structure.getChild(e);if(i!==void 0)return i.fieldProxy;let s=u(n.value);if(l(s)){if(e==="length")return n.value().length;if(e===Symbol.iterator)return()=>(n.value(),Array.prototype[Symbol.iterator].apply(n.fieldProxy))}if(N(s)&&e===Symbol.iterator)return function*(){for(let a in t)yield[a,t[a]]}},getOwnPropertyDescriptor(r,e){let t=u(r().value),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&!n.configurable&&(n.configurable=!0),n},ownKeys(r){let e=u(r().value);return typeof e=="object"&&e!==null?Reflect.ownKeys(e):[]}};function Lt(r,e){let t=o(()=>r()[e()]);return t[ie]=r[ie],t.set=n=>{r.update(i=>Ft(i,n,e()))},t.update=n=>{t.set(n(u(t)))},t.asReadonly=()=>t,t}function Ft(r,e,t){if(l(r)){let n=[...r];return n[t]=e,n}else return ne(m({},r),{[t]:e})}var J=class{logic;node;createChildNode;identitySymbol=Symbol();_injector=void 0;get injector(){return this._injector??=I.create({providers:[],parent:this.fieldManager.injector}),this._injector}constructor(e,t,n){this.logic=e,this.node=t,this.createChildNode=n}children(){let e=this.childrenMap();return e===void 0?[]:Array.from(e.byPropertyKey.values()).map(t=>u(t.reader))}getChild(e){let t=e.toString(),n=u(this.childrenMap)?.byPropertyKey.get(t)?.reader;return n||(n=this.createReader(t)),n()}reduceChildren(e,t,n){let i=this.childrenMap();if(!i)return e;let s=e;for(let a of i.byPropertyKey.values()){if(n?.(s))break;s=t(u(a.reader),s)}return s}destroy(){this.injector.destroy()}createKeyInParent(e,t,n){if(e.kind==="root")return wt;if(t===void 0){let i=n;return o(()=>{if(this.parent.structure.getChild(i)!==this.node)throw new Error(`RuntimeError: orphan field, looking for property '${i}' of ${de(this.parent)}`);return i})}else{let i=n;return o(()=>{let s=this.parent.structure.value();if(!l(s))throw new Error(`RuntimeError: orphan field, expected ${de(this.parent)} to be an array`);let a=s[i];if(N(a)&&a.hasOwnProperty(this.parent.structure.identitySymbol)&&a[this.parent.structure.identitySymbol]===t)return i;for(let d=0;d<s.length;d++){let h=s[d];if(N(h)&&h.hasOwnProperty(this.parent.structure.identitySymbol)&&h[this.parent.structure.identitySymbol]===t)return i=d.toString()}throw new Error(`RuntimeError: orphan field, can't find element in array ${de(this.parent)}`)})}}createChildrenMap(){return O({source:this.value,computation:(e,t)=>{if(!N(e))return;let n=t?.value??{byPropertyKey:new Map},i,s=l(e);n!==void 0&&(s?i=Bt(n,e,this.identitySymbol):i=Wt(n,e));for(let a of Object.keys(e)){let d,h=e[a];if(h===void 0){n.byPropertyKey.has(a)&&(i??=m({},n),i.byPropertyKey.delete(a));continue}s&&N(h)&&!l(h)&&(d=h[this.identitySymbol]??=Symbol(""));let A;d&&(n.byTrackingKey?.has(d)||(i??=m({},n),i.byTrackingKey??=new Map,i.byTrackingKey.set(d,this.createChildNode(a,d,s))),A=(i??n).byTrackingKey.get(d));let re=n.byPropertyKey.get(a);re===void 0?(i??=m({},n),i.byPropertyKey.set(a,{reader:this.createReader(a),node:A??this.createChildNode(a,d,s)})):A&&A!==re.node&&(i??=m({},n),re.node=A)}return i??n}})}createReader(e){return o(()=>this.childrenMap()?.byPropertyKey.get(e)?.node)}},ve=class extends J{fieldManager;value;get parent(){}get root(){return this.node}get pathKeys(){return Vt}get keyInParent(){return wt}childrenMap;constructor(e,t,n,i,s){super(t,e,s),this.fieldManager=n,this.value=i,this.childrenMap=this.createChildrenMap()}},be=class extends J{logic;parent;root;pathKeys;keyInParent;value;childrenMap;get fieldManager(){return this.root.structure.fieldManager}constructor(e,t,n,i,s,a){super(t,e,a),this.logic=t,this.parent=n,this.root=this.parent.structure.root,this.keyInParent=this.createKeyInParent({kind:"child",parent:n,pathNode:void 0,logic:t,initialKeyInParent:s,identityInParent:i,fieldAdapter:void 0},i,s),this.pathKeys=o(()=>[...n.structure.pathKeys(),this.keyInParent()]),this.value=Lt(this.parent.structure.value,this.keyInParent),this.childrenMap=this.createChildrenMap(),this.fieldManager.structures.add(this)}};var Vt=o(()=>[]),wt=o(()=>{throw new Error("RuntimeError: the top-level field in the form has no parent")});function de(r){return`<root>.${r.structure.pathKeys().join(".")}`}function Bt(r,e,t){let n,i=new Set(r.byPropertyKey.keys()),s=new Set(r.byTrackingKey?.keys());for(let a=0;a<e.length;a++){let d=e[a];i.delete(a.toString()),N(d)&&d.hasOwnProperty(t)&&s.delete(d[t])}if(i.size>0){n??=m({},r);for(let a of i)n.byPropertyKey.delete(a)}if(s.size>0){n??=m({},r);for(let a of s)n.byTrackingKey?.delete(a)}return n}function Wt(r,e){let t;for(let n of r.byPropertyKey.keys())e.hasOwnProperty(n)||(t??=m({},r),t.byPropertyKey.delete(n));return t}var _e=class{node;selfSubmitting=v(!1);serverErrors;constructor(e){this.node=e,this.serverErrors=O({source:this.node.structure.value,computation:()=>[]})}submitting=o(()=>this.selfSubmitting()||(this.node.structure.parent?.submitting()??!1))},L=class{structure;validationState;metadataState;nodeState;submitState;fieldAdapter;_context=void 0;get context(){return this._context??=new ge(this)}fieldProxy=new Proxy(()=>this,Kt);pathNode;constructor(e){this.pathNode=e.pathNode,this.fieldAdapter=e.fieldAdapter,this.structure=this.fieldAdapter.createStructure(this,e),this.validationState=this.fieldAdapter.createValidationState(this,e),this.nodeState=this.fieldAdapter.createNodeState(this,e),this.metadataState=new ye(this),this.submitState=new _e(this)}pendingSync=O({source:()=>this.value(),computation:(e,t)=>{t?.value?.abort()}});get logicNode(){return this.structure.logic}get value(){return this.structure.value}_controlValue=O(()=>this.value());get controlValue(){return this._controlValue.asReadonly()}get keyInParent(){return this.structure.keyInParent}get errors(){return this.validationState.errors}get errorSummary(){return this.validationState.errorSummary}get pending(){return this.validationState.pending}get valid(){return this.validationState.valid}get invalid(){return this.validationState.invalid}get dirty(){return this.nodeState.dirty}get touched(){return this.nodeState.touched}get disabled(){return this.nodeState.disabled}get disabledReasons(){return this.nodeState.disabledReasons}get hidden(){return this.nodeState.hidden}get readonly(){return this.nodeState.readonly}get fieldBindings(){return this.nodeState.fieldBindings}get submitting(){return this.submitState.submitting}get name(){return this.nodeState.name}get max(){return this.metadata(vt)}get maxLength(){return this.metadata(bt)}get min(){return this.metadata(yt)}get minLength(){return this.metadata(Ne)}get pattern(){return this.metadata(_t)??zt}get required(){return this.metadata(Me)??Ht}metadata(e){return this.metadataState.get(e)}hasMetadata(e){return this.metadataState.has(e)}markAsTouched(){this.nodeState.markAsTouched(),this.pendingSync()?.abort(),this.sync()}markAsDirty(){this.nodeState.markAsDirty()}reset(e){u(()=>this._reset(e))}_reset(e){e!==void 0&&this.value.set(e),this.nodeState.markAsUntouched(),this.nodeState.markAsPristine();for(let t of this.structure.children())t._reset()}setControlValue(e){this._controlValue.set(e),this.markAsDirty(),this.debounceSync()}sync(){this.value.set(this.controlValue())}async debounceSync(){this.pendingSync()?.abort();let e=this.nodeState.debouncer();if(e){let t=new AbortController,n=e(t.signal);if(n&&(this.pendingSync.set(t),await n,t.signal.aborted))return}this.sync()}static newRoot(e,t,n,i){return i.newRoot(e,t,n,i)}createStructure(e){return e.kind==="root"?new ve(this,e.logic,e.fieldManager,e.value,this.newChild.bind(this)):new be(this,e.logic,e.parent,e.identityInParent,e.initialKeyInParent,this.newChild.bind(this))}newChild(e,t,n){let i,s;return n?(i=this.pathNode.getChild(w),s=this.structure.logic.getChild(w)):(i=this.pathNode.getChild(e),s=this.structure.logic.getChild(e)),this.fieldAdapter.newChild({kind:"child",parent:this,pathNode:i,logic:s,initialKeyInParent:e,identityInParent:t,fieldAdapter:this.fieldAdapter})}},zt=o(()=>[]),Ht=o(()=>!1),we=class{node;selfTouched=v(!1);selfDirty=v(!1);markAsTouched(){this.selfTouched.set(!0)}markAsDirty(){this.selfDirty.set(!0)}markAsPristine(){this.selfDirty.set(!1)}markAsUntouched(){this.selfTouched.set(!1)}fieldBindings=v([]);constructor(e){this.node=e}dirty=o(()=>{let e=this.selfDirty()&&!this.isNonInteractive();return this.node.structure.reduceChildren(e,(t,n)=>n||t.nodeState.dirty(),mt)});touched=o(()=>{let e=this.selfTouched()&&!this.isNonInteractive();return this.node.structure.reduceChildren(e,(t,n)=>n||t.nodeState.touched(),mt)});disabledReasons=o(()=>[...this.node.structure.parent?.nodeState.disabledReasons()??[],...this.node.logicNode.logic.disabledReasons.compute(this.node.context)]);disabled=o(()=>!!this.disabledReasons().length);readonly=o(()=>(this.node.structure.parent?.nodeState.readonly()||this.node.logicNode.logic.readonly.compute(this.node.context))??!1);hidden=o(()=>(this.node.structure.parent?.nodeState.hidden()||this.node.logicNode.logic.hidden.compute(this.node.context))??!1);name=o(()=>{let e=this.node.structure.parent;return e?`${e.name()}.${this.node.structure.keyInParent()}`:this.node.structure.fieldManager.rootName});debouncer=o(()=>{if(this.node.logicNode.logic.hasMetadata(pe)){let t=this.node.logicNode.logic.getMetadata(pe).compute(this.node.context);if(t)return n=>t(this.node.context,n)}return this.node.structure.parent?.nodeState.debouncer?.()});isNonInteractive=o(()=>this.hidden()||this.disabled()||this.readonly())},Se=class{newRoot(e,t,n,i){return new L({kind:"root",fieldManager:e,value:t,pathNode:n,logic:n.builder.build(),fieldAdapter:i})}newChild(e){return new L(e)}createNodeState(e){return new we(e)}createValidationState(e){return new fe(e)}createStructure(e,t){return e.createStructure(t)}},Ee=class{injector;rootName;constructor(e,t){this.injector=e,this.rootName=t??`${this.injector.get(Ke)}.form${Gt++}`}structures=new Set;createFieldManagementEffect(e){S(()=>{let t=new Set;this.markStructuresLive(e,t);for(let n of this.structures)t.has(n)||(this.structures.delete(n),u(()=>n.destroy()))},{injector:this.injector})}markStructuresLive(e,t){t.add(e);for(let n of e.children())this.markStructuresLive(n.structure,t)}},Gt=0;function $t(r){let e,t,n;return r.length===3?[e,t,n]=r:r.length===2?Tt(r[1])?[e,t]=r:[e,n]=r:[e]=r,[e,t,n]}function Ut(...r){let[e,t,n]=$t(r),i=n?.injector??c(I),s=se(i,()=>Z.rootCompile(t)),a=new Ee(i,n?.name),d=n?.adapter??new Se,h=L.newRoot(a,e,s,d);return a.createFieldManagementEffect(h.structure),h.fieldProxy}async function qt(r,e){let t=r();if(St(t),!t.invalid()){t.submitState.selfSubmitting.set(!0);try{let n=await e(r);n&&Xt(t,n)}finally{t.submitState.selfSubmitting.set(!1)}}}function Xt(r,e){l(e)||(e=[e]);let t=new Map;for(let n of e){let i=Re(n,r.fieldProxy),s=i.field(),a=t.get(s);a||(a=[],t.set(s,a)),a.push(i)}for(let[n,i]of t)n.submitState.serverErrors.set(i)}function St(r){r.markAsTouched();for(let e of r.structure.children())St(e)}var Yt=new D("");var ke=class{field;constructor(e){this.field=e}control=this;get value(){return this.field().value()}get valid(){return this.field().valid()}get invalid(){return this.field().invalid()}get pending(){return this.field().pending()}get disabled(){return this.field().disabled()}get enabled(){return!this.field().disabled()}get errors(){let e=this.field().errors();if(e.length===0)return null;let t={};for(let n of e)t[n.kind]=n;return t}get pristine(){return!this.field().dirty()}get dirty(){return this.field().dirty()}get touched(){return this.field().touched()}get untouched(){return!this.field().touched()}get status(){if(this.field().disabled())return"DISABLED";if(this.field().valid())return"VALID";if(this.field().invalid())return"INVALID";if(this.field().pending())return"PENDING";throw Error("AssertionError: unknown form control status")}valueAccessor=null;hasValidator(e){return e===at.required?this.field().required():!1}updateValueAndValidity(){}},Zt=new D(""),Qt={create:We,update:ze},zr=(()=>{class r{element=c(B).nativeElement;injector=c(I);field=Je.required();state=o(()=>this.field()());[Le]=Qt;config=c(Yt,{optional:!0});classes=Object.entries(this.config?.classes??{}).map(([t,n])=>[t,o(()=>n(this.state()))]);controlValueAccessors=c(st,{optional:!0,self:!0});interopNgControl;get \u0275interopControl(){return this.controlValueAccessors?.[0]??this.interopNgControl?.valueAccessor??void 0}getOrCreateNgControl(){return this.interopNgControl??=new ke(this.state)}\u0275register(){S(t=>{let n=this.state();n.nodeState.fieldBindings.update(i=>[...i,this]),t(()=>{n.nodeState.fieldBindings.update(i=>i.filter(s=>s!==this))})},{injector:this.injector})}static \u0275fac=function(n){return new(n||r)};static \u0275dir=Ve({type:r,selectors:[["","field",""]],inputs:{field:[1,"field"]},features:[Ze([{provide:Zt,useExisting:r},{provide:ot,useFactory:()=>c(r).getOrCreateNgControl()}])]})}return r})();function Hr(r,e){te(r),f.unwrapFieldPath(r).builder.addHiddenRule(e)}function Jt(r){return new Ce(r)}function er(r,e){return new Ae(r,e)}function tr(r){return new De(r)}function rr(r){return new Pe(r)}var Pe=class{__brand=void 0;kind="";field;message;constructor(e){e&&Object.assign(this,e)}},V=class{__brand=void 0;kind="";field;message;constructor(e){e&&Object.assign(this,e)}},Ce=class extends V{kind="required"};var Ae=class extends V{minLength;kind="minLength";constructor(e,t){super(t),this.minLength=e}};var De=class extends V{kind="email"};function nr(r){let e=r;return typeof e.length=="number"?e.length:e.size}function C(r,e){return r instanceof Function?r(e):r}function Ie(r){return typeof r=="number"?isNaN(r):r===""||r===!1||r==null}function ir(r){return typeof r=="object"&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Et(r){return ir(r)?rr(r):r}function sr(r){return r==null?r:l(r)?r.map(Et):Et(r)}function Te(r,e){te(r),f.unwrapFieldPath(r).builder.addSyncErrorRule(n=>sr(Re(e(n),n.field)))}var ar=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Gr(r,e){Te(r,t=>{if(!Ie(t.value())&&!ar.test(t.value()))return e?.error?C(e.error,t):tr({message:C(e?.message,t)})})}function $r(r,e,t){let n=F(r,p(),i=>typeof e=="number"?e:e(i));F(r,Ne,({state:i})=>i.metadata(n)()),Te(r,i=>{if(Ie(i.value()))return;let s=i.state.metadata(n)();if(s!==void 0&&nr(i.value())<s)return t?.error?C(t.error,i):er(s,{message:C(t?.message,i)})})}function Ur(r,e){let t=F(r,p(),n=>e?.when?e.when(n):!0);F(r,Me,({state:n})=>n.metadata(t)()),Te(r,n=>{if(n.state.metadata(t)()&&Ie(n.value()))return e?.error?C(e.error,n):Jt({message:C(e?.message,n)})})}var Yr={required:"To pole jest wymagane",email:"Nieprawid\u0142owy format"};export{Mr as a,Ut as b,qt as c,zr as d,Hr as e,Te as f,Gr as g,$r as h,Ur as i,Yr as j};
//# sourceMappingURL=chunk-AGIC6ILJ.js.map
