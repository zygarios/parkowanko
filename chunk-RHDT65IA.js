import{a as H}from"./chunk-AM5BGON4.js";import{a as Q,b as U,c as W,d as y,e as X,f as Y,g as I,h as v,i as h}from"./chunk-5EB625NY.js";import{b as F}from"./chunk-S5AG3UBK.js";import{c as J,d as K}from"./chunk-ADCWLRPY.js";import{$a as M,Gb as s,Hb as f,Ib as g,La as T,Y as P,Zc as k,_c as G,aa as S,ab as w,ad as L,ba as E,cb as l,db as u,ed as O,fd as R,gc as N,ib as C,id as j,jb as n,kb as r,kd as D,lb as p,n as x,na as _,nd as z,od as V,pb as A,pd as q,rb as c,tb as b,ud as Z,xd as B,ya as a,zd as $}from"./chunk-UQET437M.js";import"./chunk-C6Q5SG76.js";function ie(o,t){o&1&&(n(0,"mat-error"),s(1),r()),o&2&&(a(),f(t.message))}function ae(o,t){if(o&1&&(n(0,"mat-form-field",4)(1,"mat-label"),s(2,"Nazwa u\u017Cytkownika"),r(),p(3,"input",13),M(),n(4,"mat-icon",6),s(5," person "),r(),l(6,ie,2,1,"mat-error"),r()),o&2){let i,e=b();a(3),w(e.authForm.username),a(3),u((i=e.authForm.username().errors()[0])?6:-1,i)}}function ne(o,t){o&1&&(n(0,"mat-error"),s(1),r()),o&2&&(a(),f(t.message))}function oe(o,t){o&1&&(n(0,"mat-error"),s(1),r()),o&2&&(a(),f(t.message))}function re(o,t){o&1&&(n(0,"mat-error"),s(1),r()),o&2&&(a(),f(t.message))}function se(o,t){if(o&1){let i=A();n(0,"mat-form-field",4)(1,"mat-label"),s(2,"Powt\xF3rz has\u0142o"),r(),p(3,"input",7),M(),l(4,re,2,1,"mat-error"),n(5,"button",8),c("click",function(){S(i);let m=b();return E(m.togglePasswordVisibility("repeatedPassword"))}),n(6,"mat-icon"),s(7),r()()()}if(o&2){let i,e=b();a(3),w(e.authForm.repeatedPassword),C("type",e.isRepeatedPasswordHidden()?"password":"text"),a(),u((i=e.authForm.repeatedPassword().errors()[0])?4:-1,i),a(3),g(" ",e.isRepeatedPasswordHidden()?"visibility_off":"visibility"," ")}}var te=(i=>(i.LOGIN="LOGIN",i.REGISTER="REGISTER",i))(te||{}),ee=class o{isPasswordHidden=_(!0);isRepeatedPasswordHidden=_(!0);authMode=_("LOGIN");authModeType=te;_authService=P(H);_router=P(F);authModel=_({username:"",email:"",password:"",repeatedPassword:""});authForm=Q(this.authModel,t=>{v(t.username,{message:h.required}),I(t.username,3,{message:"Minimalna d\u0142ugo\u015B\u0107 znak\xF3w to 3"}),y(t.username,()=>this.authMode()==="LOGIN"),v(t.email,{message:h.required}),Y(t.email,{message:h.email}),v(t.password,{message:h.required}),I(t.password,8,{message:"Minimalna d\u0142ugo\u015B\u0107 znak\xF3w to 8"}),v(t.repeatedPassword,{message:h.required}),y(t.repeatedPassword,()=>this.authMode()==="LOGIN"),X(t.repeatedPassword,({value:i,valueOf:e})=>{let m=i(),d=e(t.password);return m!==d?{kind:"passwordMismatch",message:"Podane has\u0142a nie s\u0105 identyczne"}:null})});togglePasswordVisibility(t){t==="password"?this.isPasswordHidden.update(i=>!i):this.isRepeatedPasswordHidden.update(i=>!i)}changeAuthMode(){this.authMode.update(t=>t==="LOGIN"?"REGISTER":"LOGIN")}submit(){U(this.authForm,async()=>{let{username:t,email:i,password:e}=this.authModel(),m=this.authMode()==="LOGIN"?this._authService.login({email:i,password:e}):this._authService.register({username:t,email:i,password:e});try{await x(m),this._router.navigate(["/"]);return}catch(d){console.error(d);return}})}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=T({type:o,selectors:[["app-auth-page"]],decls:30,vars:15,consts:[[1,"auth-container","flex","flex-col","text-center"],["priority","","ngSrc","/images/banner-logo.png","width","376","height","216",1,"w-40","ml-auto","mr-auto","mb-5"],[1,"font-large"],[1,"flex-1","flex","flex-col","pt-5","pb-5",3,"submit"],["subscriptSizing","dynamic"],["matInput","","type","email",3,"field"],["matSuffix",""],["matInput","",3,"field","type"],["mat-icon-button","","matSuffix","",3,"click"],[1,"flex","flex-col","gap-4","mt-10"],["mat-flat-button","",3,"click","disabled"],[1,"flex","gap-5","items-center","justify-between","font-small"],["mat-button","",3,"click"],["matInput","","type","text",3,"field"]],template:function(i,e){if(i&1&&(n(0,"div",0),p(1,"img",1),n(2,"h1",2),s(3),r(),n(4,"form",3),c("submit",function(d){return d.preventDefault()}),l(5,ae,7,3,"mat-form-field",4),n(6,"mat-form-field",4)(7,"mat-label"),s(8,"Email"),r(),p(9,"input",5),M(),n(10,"mat-icon",6),s(11," alternate_email "),r(),l(12,ne,2,1,"mat-error"),r(),n(13,"mat-form-field",4)(14,"mat-label"),s(15,"Has\u0142o"),r(),p(16,"input",7),M(),l(17,oe,2,1,"mat-error"),n(18,"button",8),c("click",function(){return e.togglePasswordVisibility("password")}),n(19,"mat-icon"),s(20),r()()(),l(21,se,8,5,"mat-form-field",4),r(),p(22,"hr"),n(23,"div",9)(24,"button",10),c("click",function(){return e.submit()}),s(25),r(),n(26,"div",11),s(27),n(28,"button",12),c("click",function(){return e.changeAuthMode()}),s(29),r()()()()),i&2){let m,d;a(3),f(e.authMode()===e.authModeType.LOGIN?"Logowanie":"Rejestracja"),a(2),u(e.authForm.username().hidden()?-1:5),a(4),w(e.authForm.email),a(3),u((m=e.authForm.email().errors()[0])?12:-1,m),a(4),w(e.authForm.password),C("type",e.isPasswordHidden()?"password":"text"),a(),u((d=e.authForm.password().errors()[0])?17:-1,d),a(3),g(" ",e.isPasswordHidden()?"visibility_off":"visibility"," "),a(),u(e.authForm.repeatedPassword().hidden()?-1:21),a(3),C("disabled",e.authForm().submitting()),a(),g(" ",e.authMode()===e.authModeType.LOGIN?"Zaloguj":"Zarejestruj"," "),a(2),g(" ",e.authMode()===e.authModeType.LOGIN?"Nie masz jeszcze konta?":"Masz ju\u017C konto?"," "),a(2),g(" ",e.authMode()===e.authModeType.LOGIN?"Zarejestruj si\u0119":"Zaloguj si\u0119"," ")}},dependencies:[R,O,k,G,L,q,V,$,B,Z,K,J,z,D,j,W,N],styles:[".auth-container[_ngcontent-%COMP%]{padding:var(--par-container-padding)}"],changeDetection:0})};export{ee as AuthPageComponent};
