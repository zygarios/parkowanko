import{L as J,M as Q,N as U,O as W,P as X,Q as P,R as Y,S as ee,T as I,U as S,V as _}from"./chunk-X54AUADB.js";import{d as H,g as D,i as V,k as q,l as B,n as Z,r as K,s as $,v as te,w as ie}from"./chunk-PV7HTGCY.js";import{h as G}from"./chunk-45CQHWFI.js";import{$ as y,Ba as n,Lb as m,Mb as g,Nb as h,Oa as N,da as E,db as v,ea as k,eb as b,gb as p,hb as c,jd as j,ld as A,mb as C,n as F,nb as a,ob as r,od as R,pa as w,pb as f,pd as z,qc as T,qd as O,tb as L,vb as M,xb as x}from"./chunk-NJW6QKHS.js";import"./chunk-VZBGOO6O.js";function ae(i,l){i&1&&(a(0,"mat-error"),m(1),r()),i&2&&(n(),g(l.message))}function oe(i,l){if(i&1&&(a(0,"mat-form-field",4)(1,"mat-label"),m(2,"Nazwa u\u017Cytkownika"),r(),f(3,"input",16),v(),a(4,"mat-icon",6),m(5," person "),r(),p(6,ae,2,1,"mat-error"),r()),i&2){let e,o=x();n(3),b(o.authForm.username,"formField"),n(3),c((e=o.authForm.username().errors()[0])?6:-1,e)}}function ne(i,l){i&1&&(a(0,"mat-error"),m(1),r()),i&2&&(n(),g(l.message))}function re(i,l){i&1&&(a(0,"mat-error"),m(1),r()),i&2&&(n(),g(l.message))}function me(i,l){i&1&&(a(0,"mat-error"),m(1),r()),i&2&&(n(),g(l.message))}function le(i,l){if(i&1){let e=L();a(0,"mat-form-field",4)(1,"mat-label"),m(2,"Powt\xF3rz has\u0142o"),r(),f(3,"input",7),v(),p(4,me,2,1,"mat-error"),a(5,"button",8),M("click",function(){E(e);let t=x();return k(t.togglePasswordVisibility("repeatedPassword"))}),a(6,"mat-icon"),m(7),r()()()}if(i&2){let e,o=x();n(3),C("type",o.isRepeatedPasswordHidden()?"password":"text"),b(o.authForm.repeatedPassword,"formField"),n(),c((e=o.authForm.repeatedPassword().errors()[0])?4:-1,e),n(3),h(" ",o.isRepeatedPasswordHidden()?"visibility_off":"visibility"," ")}}var s=(function(i){return i.LOGIN="LOGIN",i.REGISTER="REGISTER",i})(s||{}),Ee=(()=>{class i{_authService=y(J);_globalSpinnerService=y(Q);isPasswordHidden=w(!0);isRepeatedPasswordHidden=w(!0);authMode=w(s.LOGIN);authModeType=s;authModel=w({username:"",email:"",password:"",repeatedPassword:""});authForm=U(this.authModel,e=>{S(e.username,{message:_.required}),I(e.username,3,{message:"Minimalna d\u0142ugo\u015B\u0107 znak\xF3w to 3"}),P(e.username,()=>this.authMode()===s.LOGIN),S(e.email,{message:_.required}),ee(e.email,{message:_.email}),S(e.password,{message:_.required}),I(e.password,8,{message:"Minimalna d\u0142ugo\u015B\u0107 znak\xF3w to 8"}),S(e.repeatedPassword,{message:_.required}),P(e.repeatedPassword,()=>this.authMode()===s.LOGIN),Y(e.repeatedPassword,({value:o,valueOf:t})=>{let d=o(),u=t(e.password);return d!==u?{kind:"passwordMismatch",message:"Podane has\u0142a nie s\u0105 identyczne"}:null})});togglePasswordVisibility(e){e==="password"?this.isPasswordHidden.update(o=>!o):this.isRepeatedPasswordHidden.update(o=>!o)}changeAuthMode(){this.authMode.update(e=>e===s.LOGIN?s.REGISTER:s.LOGIN)}submit(){W(this.authForm,async()=>{let{username:e,email:o,password:t}=this.authModel(),d=this.authMode()===s.LOGIN?this._authService.login({email:o,password:t}):this._authService.register({username:e,email:o,password:t});try{this._globalSpinnerService.show(),await F(d)}catch(u){console.error(u)}finally{this._globalSpinnerService.hide();return}})}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=N({type:i,selectors:[["app-auth-page"]],decls:34,vars:15,consts:[[1,"flex","flex-col","text-center","p-(--par-container-padding)"],["priority","","ngSrc","icons/logo-parkowanko.svg","width","120","height","120","alt","Logo Parkowanko",1,"ml-auto","mr-auto","mb-5"],[1,"font-large"],[1,"flex-1","flex","flex-col","pt-5","pb-5",3,"submit"],["subscriptSizing","dynamic"],["matInput","","type","email",3,"formField"],["matSuffix",""],["matInput","",3,"formField","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"mt-5","mb-5"],[1,"flex","flex-col","gap-4","mt-auto"],["type","submit","mat-flat-button","",3,"disabled"],[1,"text-xs","text-slate-500","mt-2","mb-2"],["routerLink","/polityka-prywatnosci",1,"text-par-color-primary","font-medium","underline","cursor-pointer"],[1,"flex","gap-5","items-center","justify-between","font-small"],["type","button","mat-button","",3,"click"],["matInput","","type","text",3,"formField"]],template:function(o,t){if(o&1&&(a(0,"div",0),f(1,"img",1),a(2,"h1",2),m(3),r(),a(4,"form",3),M("submit",function(u){return u.preventDefault(),t.submit()}),p(5,oe,7,3,"mat-form-field",4),a(6,"mat-form-field",4)(7,"mat-label"),m(8,"Email"),r(),f(9,"input",5),v(),a(10,"mat-icon",6),m(11," alternate_email "),r(),p(12,ne,2,1,"mat-error"),r(),a(13,"mat-form-field",4)(14,"mat-label"),m(15,"Has\u0142o"),r(),f(16,"input",7),v(),p(17,re,2,1,"mat-error"),a(18,"button",8),M("click",function(){return t.togglePasswordVisibility("password")}),a(19,"mat-icon"),m(20),r()()(),p(21,le,8,5,"mat-form-field",4),f(22,"hr",9),a(23,"div",10)(24,"button",11),m(25),r(),a(26,"div",12),m(27," Kontynuuj\u0105c, akceptujesz nasz\u0105 "),a(28,"a",13),m(29,"Polityk\u0119 Prywatno\u015Bci"),r()(),a(30,"div",14),m(31),a(32,"button",15),M("click",function(){return t.changeAuthMode()}),m(33),r()()()()()),o&2){let d,u;n(3),g(t.authMode()===t.authModeType.LOGIN?"Logowanie":"Rejestracja"),n(2),c(t.authForm.username().hidden()?-1:5),n(4),b(t.authForm.email,"formField"),n(3),c((d=t.authForm.email().errors()[0])?12:-1,d),n(4),C("type",t.isPasswordHidden()?"password":"text"),b(t.authForm.password,"formField"),n(),c((u=t.authForm.password().errors()[0])?17:-1,u),n(3),h(" ",t.isPasswordHidden()?"visibility_off":"visibility"," "),n(),c(t.authForm.repeatedPassword().hidden()?-1:21),n(3),C("disabled",t.authForm().submitting()),n(),h(" ",t.authMode()===t.authModeType.LOGIN?"Zaloguj":"Zarejestruj"," "),n(6),h(" ",t.authMode()===t.authModeType.LOGIN?"Nie masz jeszcze konta?":"Masz ju\u017C konto?"," "),n(2),h(" ",t.authMode()===t.authModeType.LOGIN?"Zarejestruj si\u0119":"Zaloguj si\u0119"," ")}},dependencies:[$,K,q,B,Z,O,z,V,D,H,ie,te,R,A,j,X,T,G],encapsulation:2,changeDetection:0})}return i})();export{Ee as AuthPageComponent};
//# sourceMappingURL=chunk-VIBHVC73.js.map
