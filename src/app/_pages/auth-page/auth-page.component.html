<div class="flex flex-col text-center p-(--par-container-padding)">
  <img
    class="ml-auto mr-auto mb-5"
    priority
    ngSrc="icons/logo-parkowanko.svg"
    width="120"
    height="120"
  />

  <h1 class="font-large">{{ authMode() === authModeType.LOGIN ? 'Logowanie' : 'Rejestracja' }}</h1>

  <form class="flex-1 flex flex-col pt-5 pb-5" (submit)="$event.preventDefault(); submit()">
    @if (!authForm.username().hidden()) {
      <mat-form-field subscriptSizing="dynamic">
        <mat-label>Nazwa użytkownika</mat-label>
        <input [formField]="authForm.username" matInput type="text" />
        <mat-icon matSuffix> person </mat-icon>
        @if (authForm.username().errors()[0]; as error) {
          <mat-error>{{ error.message }}</mat-error>
        }
      </mat-form-field>
    }
    <mat-form-field subscriptSizing="dynamic">
      <mat-label>Email</mat-label>
      <input [formField]="authForm.email" matInput type="email" />
      <mat-icon matSuffix> alternate_email </mat-icon>
      @if (authForm.email().errors()[0]; as error) {
        <mat-error>{{ error.message }}</mat-error>
      }
    </mat-form-field>
    <mat-form-field subscriptSizing="dynamic">
      <mat-label>Hasło</mat-label>
      <input
        matInput
        [formField]="authForm.password"
        [type]="isPasswordHidden() ? 'password' : 'text'"
      />
      @if (authForm.password().errors()[0]; as error) {
        <mat-error>{{ error.message }}</mat-error>
      }
      <button
        type="button"
        mat-icon-button
        matSuffix
        (click)="togglePasswordVisibility('password')"
      >
        <mat-icon>
          {{ isPasswordHidden() ? 'visibility_off' : 'visibility' }}
        </mat-icon>
      </button>
    </mat-form-field>
    @if (!authForm.repeatedPassword().hidden()) {
      <mat-form-field subscriptSizing="dynamic">
        <mat-label>Powtórz hasło</mat-label>
        <input
          [formField]="authForm.repeatedPassword"
          matInput
          [type]="isRepeatedPasswordHidden() ? 'password' : 'text'"
        />
        @if (authForm.repeatedPassword().errors()[0]; as error) {
          <mat-error>{{ error.message }}</mat-error>
        }
        <button
          type="button"
          mat-icon-button
          matSuffix
          (click)="togglePasswordVisibility('repeatedPassword')"
        >
          <mat-icon>
            {{ isRepeatedPasswordHidden() ? 'visibility_off' : 'visibility' }}
          </mat-icon>
        </button>
      </mat-form-field>
    }

    <hr class="mt-5 mb-5" />

    <div class="flex flex-col gap-4 mt-auto">
      <button type="submit" mat-flat-button [disabled]="authForm().submitting()">
        {{ authMode() === authModeType.LOGIN ? 'Zaloguj' : 'Zarejestruj' }}
      </button>
      <div class="flex gap-5 items-center justify-between font-small">
        {{ authMode() === authModeType.LOGIN ? 'Nie masz jeszcze konta?' : 'Masz już konto?' }}
        <button type="button" mat-button (click)="changeAuthMode()">
          {{ authMode() === authModeType.LOGIN ? 'Zarejestruj się' : 'Zaloguj się' }}
        </button>
      </div>
    </div>
  </form>
</div>
