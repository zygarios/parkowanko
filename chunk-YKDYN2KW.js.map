{
  "version": 3,
  "sources": ["src/app/_pages/auth-page/auth-page.component.ts", "src/app/_pages/auth-page/auth-page.component.html"],
  "sourcesContent": ["import { NgOptimizedImage } from '@angular/common';\r\nimport { ChangeDetectionStrategy, Component, inject, signal } from '@angular/core';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport {\r\n  email,\r\n  Field,\r\n  form,\r\n  hidden,\r\n  minLength,\r\n  required,\r\n  submit,\r\n  validate,\r\n} from '@angular/forms/signals';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { firstValueFrom } from 'rxjs';\r\nimport { validationMessages } from '../../_others/_helpers/validation-messages';\r\nimport { AuthService } from '../../_services/_core/auth.service';\r\n\r\ninterface AuthData {\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n  repeatedPassword: string;\r\n}\r\n\r\nenum AuthModeType {\r\n  LOGIN = 'LOGIN',\r\n  REGISTER = 'REGISTER',\r\n}\r\n\r\n@Component({\r\n  selector: 'app-auth-page',\r\n  imports: [\r\n    MatFormFieldModule,\r\n    MatIconModule,\r\n    ReactiveFormsModule,\r\n    MatInputModule,\r\n    MatButtonModule,\r\n    Field,\r\n    NgOptimizedImage,\r\n  ],\r\n  templateUrl: './auth-page.component.html',\r\n  styles: `\r\n    .auth-container {\r\n      padding: var(--par-container-padding);\r\n    }\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class AuthPageComponent {\r\n  isPasswordHidden = signal(true);\r\n  isRepeatedPasswordHidden = signal(true);\r\n  authMode = signal<AuthModeType>(AuthModeType.LOGIN);\r\n  authModeType = AuthModeType;\r\n\r\n  private _authService = inject(AuthService);\r\n\r\n  private authModel = signal<AuthData>({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    repeatedPassword: '',\r\n  });\r\n\r\n  authForm = form(this.authModel, (path) => {\r\n    required(path.username, { message: validationMessages.required });\r\n    minLength(path.username, 3, { message: 'Minimalna długość znaków to 3' });\r\n    hidden(path.username, () => this.authMode() === AuthModeType.LOGIN);\r\n\r\n    required(path.email, { message: validationMessages.required });\r\n    email(path.email, { message: validationMessages.email });\r\n\r\n    required(path.password, { message: validationMessages.required });\r\n    minLength(path.password, 8, { message: 'Minimalna długość znaków to 8' });\r\n\r\n    required(path.repeatedPassword, { message: validationMessages.required });\r\n\r\n    hidden(path.repeatedPassword, () => this.authMode() === AuthModeType.LOGIN);\r\n\r\n    validate(path.repeatedPassword, ({ value, valueOf }) => {\r\n      const confirmPassword = value();\r\n      const password = valueOf(path.password);\r\n      if (confirmPassword !== password) {\r\n        return {\r\n          kind: 'passwordMismatch',\r\n          message: 'Podane hasła nie są identyczne',\r\n        };\r\n      }\r\n      return null;\r\n    });\r\n  });\r\n\r\n  togglePasswordVisibility(field: 'password' | 'repeatedPassword') {\r\n    if (field === 'password') this.isPasswordHidden.update((value) => !value);\r\n    else this.isRepeatedPasswordHidden.update((value) => !value);\r\n  }\r\n\r\n  changeAuthMode() {\r\n    this.authMode.update((value) =>\r\n      value === AuthModeType.LOGIN ? AuthModeType.REGISTER : AuthModeType.LOGIN,\r\n    );\r\n  }\r\n\r\n  submit() {\r\n    submit(this.authForm, async () => {\r\n      const { username, email, password } = this.authModel();\r\n\r\n      const request$ =\r\n        this.authMode() === AuthModeType.LOGIN\r\n          ? this._authService.login({ email, password })\r\n          : this._authService.register({ username, email, password });\r\n\r\n      try {\r\n        await firstValueFrom(request$);\r\n        return;\r\n      } catch (err) {\r\n        console.error(err);\r\n        return;\r\n      }\r\n    });\r\n  }\r\n}\r\n", "<div class=\"auth-container flex flex-col text-center\">\r\n  <img\r\n    class=\"w-40 ml-auto mr-auto mb-5\"\r\n    priority\r\n    ngSrc=\"images/banner-logo.png\"\r\n    width=\"376\"\r\n    height=\"216\"\r\n  />\r\n  <h1 class=\"font-large\">{{ authMode() === authModeType.LOGIN ? 'Logowanie' : 'Rejestracja' }}</h1>\r\n  <form class=\"flex-1 flex flex-col pt-5 pb-5\" (submit)=\"$event.preventDefault()\">\r\n    @if (!authForm.username().hidden()) {\r\n      <mat-form-field subscriptSizing=\"dynamic\">\r\n        <mat-label>Nazwa użytkownika</mat-label>\r\n        <input [field]=\"authForm.username\" matInput type=\"text\" />\r\n        <mat-icon matSuffix> person </mat-icon>\r\n        @if (authForm.username().errors()[0]; as error) {\r\n          <mat-error>{{ error.message }}</mat-error>\r\n        }\r\n      </mat-form-field>\r\n    }\r\n    <mat-form-field subscriptSizing=\"dynamic\">\r\n      <mat-label>Email</mat-label>\r\n      <input [field]=\"authForm.email\" matInput type=\"email\" />\r\n      <mat-icon matSuffix> alternate_email </mat-icon>\r\n      @if (authForm.email().errors()[0]; as error) {\r\n        <mat-error>{{ error.message }}</mat-error>\r\n      }\r\n    </mat-form-field>\r\n    <mat-form-field subscriptSizing=\"dynamic\">\r\n      <mat-label>Hasło</mat-label>\r\n      <input\r\n        matInput\r\n        [field]=\"authForm.password\"\r\n        [type]=\"isPasswordHidden() ? 'password' : 'text'\"\r\n      />\r\n      @if (authForm.password().errors()[0]; as error) {\r\n        <mat-error>{{ error.message }}</mat-error>\r\n      }\r\n      <button mat-icon-button matSuffix (click)=\"togglePasswordVisibility('password')\">\r\n        <mat-icon>\r\n          {{ isPasswordHidden() ? 'visibility_off' : 'visibility' }}\r\n        </mat-icon>\r\n      </button>\r\n    </mat-form-field>\r\n    @if (!authForm.repeatedPassword().hidden()) {\r\n      <mat-form-field subscriptSizing=\"dynamic\">\r\n        <mat-label>Powtórz hasło</mat-label>\r\n        <input\r\n          [field]=\"authForm.repeatedPassword\"\r\n          matInput\r\n          [type]=\"isRepeatedPasswordHidden() ? 'password' : 'text'\"\r\n        />\r\n        @if (authForm.repeatedPassword().errors()[0]; as error) {\r\n          <mat-error>{{ error.message }}</mat-error>\r\n        }\r\n        <button mat-icon-button matSuffix (click)=\"togglePasswordVisibility('repeatedPassword')\">\r\n          <mat-icon>\r\n            {{ isRepeatedPasswordHidden() ? 'visibility_off' : 'visibility' }}\r\n          </mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n    }\r\n  </form>\r\n\r\n  <hr />\r\n\r\n  <div class=\"flex flex-col gap-4 mt-10\">\r\n    <button mat-flat-button (click)=\"submit()\" [disabled]=\"authForm().submitting()\">\r\n      {{ authMode() === authModeType.LOGIN ? 'Zaloguj' : 'Zarejestruj' }}\r\n    </button>\r\n    <div class=\"flex gap-5 items-center justify-between font-small\">\r\n      {{ authMode() === authModeType.LOGIN ? 'Nie masz jeszcze konta?' : 'Masz już konto?' }}\r\n      <button mat-button (click)=\"changeAuthMode()\">\r\n        {{ authMode() === authModeType.LOGIN ? 'Zarejestruj się' : 'Zaloguj się' }}\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],
  "mappings": "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",
  "names": ["\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275elementEnd", "\u0275\u0275advance", "\u0275\u0275textInterpolate", "ctx", "message", "\u0275\u0275element", "\u0275\u0275controlCreate", "\u0275\u0275conditionalCreate", "AuthPageComponent_Conditional_5_Conditional_6_Template", "\u0275\u0275control", "ctx_r0", "authForm", "username", "\u0275\u0275conditional", "tmp_2_0", "errors", "AuthPageComponent_Conditional_21_Conditional_4_Template", "\u0275\u0275listener", "\u0275\u0275restoreView", "_r2", "\u0275\u0275nextContext", "\u0275\u0275resetView", "togglePasswordVisibility", "repeatedPassword", "\u0275\u0275property", "isRepeatedPasswordHidden", "tmp_3_0", "\u0275\u0275textInterpolate1", "AuthModeType", "AuthPageComponent", "isPasswordHidden", "signal", "authMode", "LOGIN", "authModeType", "_authService", "inject", "AuthService", "authModel", "email", "password", "form", "path", "required", "validationMessages", "minLength", "hidden", "validate", "value", "valueOf", "confirmPassword", "kind", "field", "update", "changeAuthMode", "REGISTER", "submit", "request$", "login", "register", "firstValueFrom", "err", "console", "error", "selectors", "decls", "vars", "consts", "template", "rf", "$event", "preventDefault", "AuthPageComponent_Conditional_5_Template", "AuthPageComponent_Conditional_12_Template", "AuthPageComponent_Conditional_17_Template", "AuthPageComponent_Conditional_21_Template", "tmp_6_0", "submitting", "MatFormFieldModule", "MatFormField", "MatLabel", "MatError", "MatSuffix", "MatIconModule", "MatIcon", "ReactiveFormsModule", "\u0275NgNoValidate", "NgControlStatusGroup", "MatInputModule", "MatInput", "MatButtonModule", "MatButton", "MatIconButton", "Field", "NgOptimizedImage", "styles", "changeDetection"]
}
