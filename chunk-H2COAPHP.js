import{a as q}from"./chunk-KT33WLNI.js";import{a as W,b as X,c as Y,d as S,e as ee,f as te,g as y,h as b,i as M}from"./chunk-ID5GX4QG.js";import{b as L}from"./chunk-I46ICTKL.js";import{c as U,d as $}from"./chunk-M7ZBIKQT.js";import{$a as v,$c as R,Ad as Q,Gb as m,Hb as h,Ib as _,La as T,Y as I,_c as A,aa as F,ab as C,ba as N,bd as O,cb as p,db as c,fd as j,gd as H,hc as G,ib as P,jb as o,jd as z,kb as r,lb as f,ld as D,n as E,na as w,od as V,pb as k,pd as Z,qd as B,rb as g,tb as x,vd as J,ya as n,yd as K}from"./chunk-76HJK4NL.js";import"./chunk-VZBGOO6O.js";function ie(i,s){i&1&&(o(0,"mat-error"),m(1),r()),i&2&&(n(),h(s.message))}function ae(i,s){if(i&1&&(o(0,"mat-form-field",4)(1,"mat-label"),m(2,"Nazwa u\u017Cytkownika"),r(),f(3,"input",13),v(),o(4,"mat-icon",6),m(5," person "),r(),p(6,ie,2,1,"mat-error"),r()),i&2){let e,a=x();n(3),C(a.authForm.username),n(3),c((e=a.authForm.username().errors()[0])?6:-1,e)}}function ne(i,s){i&1&&(o(0,"mat-error"),m(1),r()),i&2&&(n(),h(s.message))}function oe(i,s){i&1&&(o(0,"mat-error"),m(1),r()),i&2&&(n(),h(s.message))}function re(i,s){i&1&&(o(0,"mat-error"),m(1),r()),i&2&&(n(),h(s.message))}function me(i,s){if(i&1){let e=k();o(0,"mat-form-field",4)(1,"mat-label"),m(2,"Powt\xF3rz has\u0142o"),r(),f(3,"input",7),v(),p(4,re,2,1,"mat-error"),o(5,"button",8),g("click",function(){F(e);let t=x();return N(t.togglePasswordVisibility("repeatedPassword"))}),o(6,"mat-icon"),m(7),r()()()}if(i&2){let e,a=x();n(3),C(a.authForm.repeatedPassword),P("type",a.isRepeatedPasswordHidden()?"password":"text"),n(),c((e=a.authForm.repeatedPassword().errors()[0])?4:-1,e),n(3),_(" ",a.isRepeatedPasswordHidden()?"visibility_off":"visibility"," ")}}var l=(function(i){return i.LOGIN="LOGIN",i.REGISTER="REGISTER",i})(l||{}),ye=(()=>{class i{isPasswordHidden=w(!0);isRepeatedPasswordHidden=w(!0);authMode=w(l.LOGIN);authModeType=l;_authService=I(q);_router=I(L);authModel=w({username:"",email:"",password:"",repeatedPassword:""});authForm=W(this.authModel,e=>{b(e.username,{message:M.required}),y(e.username,3,{message:"Minimalna d\u0142ugo\u015B\u0107 znak\xF3w to 3"}),S(e.username,()=>this.authMode()===l.LOGIN),b(e.email,{message:M.required}),te(e.email,{message:M.email}),b(e.password,{message:M.required}),y(e.password,8,{message:"Minimalna d\u0142ugo\u015B\u0107 znak\xF3w to 8"}),b(e.repeatedPassword,{message:M.required}),S(e.repeatedPassword,()=>this.authMode()===l.LOGIN),ee(e.repeatedPassword,({value:a,valueOf:t})=>{let d=a(),u=t(e.password);return d!==u?{kind:"passwordMismatch",message:"Podane has\u0142a nie s\u0105 identyczne"}:null})});togglePasswordVisibility(e){e==="password"?this.isPasswordHidden.update(a=>!a):this.isRepeatedPasswordHidden.update(a=>!a)}changeAuthMode(){this.authMode.update(e=>e===l.LOGIN?l.REGISTER:l.LOGIN)}submit(){X(this.authForm,async()=>{let{username:e,email:a,password:t}=this.authModel(),d=this.authMode()===l.LOGIN?this._authService.login({email:a,password:t}):this._authService.register({username:e,email:a,password:t});try{await E(d),this._router.navigate(["/"]);return}catch(u){console.error(u);return}})}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=T({type:i,selectors:[["app-auth-page"]],decls:30,vars:15,consts:[[1,"auth-container","flex","flex-col","text-center"],["priority","","ngSrc","/images/banner-logo.png","width","376","height","216",1,"w-40","ml-auto","mr-auto","mb-5"],[1,"font-large"],[1,"flex-1","flex","flex-col","pt-5","pb-5",3,"submit"],["subscriptSizing","dynamic"],["matInput","","type","email",3,"field"],["matSuffix",""],["matInput","",3,"field","type"],["mat-icon-button","","matSuffix","",3,"click"],[1,"flex","flex-col","gap-4","mt-10"],["mat-flat-button","",3,"click","disabled"],[1,"flex","gap-5","items-center","justify-between","font-small"],["mat-button","",3,"click"],["matInput","","type","text",3,"field"]],template:function(a,t){if(a&1&&(o(0,"div",0),f(1,"img",1),o(2,"h1",2),m(3),r(),o(4,"form",3),g("submit",function(u){return u.preventDefault()}),p(5,ae,7,3,"mat-form-field",4),o(6,"mat-form-field",4)(7,"mat-label"),m(8,"Email"),r(),f(9,"input",5),v(),o(10,"mat-icon",6),m(11," alternate_email "),r(),p(12,ne,2,1,"mat-error"),r(),o(13,"mat-form-field",4)(14,"mat-label"),m(15,"Has\u0142o"),r(),f(16,"input",7),v(),p(17,oe,2,1,"mat-error"),o(18,"button",8),g("click",function(){return t.togglePasswordVisibility("password")}),o(19,"mat-icon"),m(20),r()()(),p(21,me,8,5,"mat-form-field",4),r(),f(22,"hr"),o(23,"div",9)(24,"button",10),g("click",function(){return t.submit()}),m(25),r(),o(26,"div",11),m(27),o(28,"button",12),g("click",function(){return t.changeAuthMode()}),m(29),r()()()()),a&2){let d,u;n(3),h(t.authMode()===t.authModeType.LOGIN?"Logowanie":"Rejestracja"),n(2),c(t.authForm.username().hidden()?-1:5),n(4),C(t.authForm.email),n(3),c((d=t.authForm.email().errors()[0])?12:-1,d),n(4),C(t.authForm.password),P("type",t.isPasswordHidden()?"password":"text"),n(),c((u=t.authForm.password().errors()[0])?17:-1,u),n(3),_(" ",t.isPasswordHidden()?"visibility_off":"visibility"," "),n(),c(t.authForm.repeatedPassword().hidden()?-1:21),n(3),P("disabled",t.authForm().submitting()),n(),_(" ",t.authMode()===t.authModeType.LOGIN?"Zaloguj":"Zarejestruj"," "),n(2),_(" ",t.authMode()===t.authModeType.LOGIN?"Nie masz jeszcze konta?":"Masz ju\u017C konto?"," "),n(2),_(" ",t.authMode()===t.authModeType.LOGIN?"Zarejestruj si\u0119":"Zaloguj si\u0119"," ")}},dependencies:[H,j,A,R,O,B,Z,Q,K,J,$,U,V,D,z,Y,G],styles:[`.auth-container[_ngcontent-%COMP%]{padding:var(--par-container-padding)}
/*# sourceMappingURL=auth-page.component-BZZMHKJQ.css.map */`],changeDetection:0})}return i})();export{ye as AuthPageComponent};
//# sourceMappingURL=chunk-H2COAPHP.js.map
